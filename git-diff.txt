diff --git a/HGW-Flask/app/__init__.py b/HGW-Flask/app/__init__.py
index a5b222e..73135ed 100644
--- a/HGW-Flask/app/__init__.py
+++ b/HGW-Flask/app/__init__.py
@@ -13,6 +13,7 @@ def create_app():
     app = Flask(__name__)
     app.config.from_object(Config)
 
+    # SWAGGER
     swagger_template = {
         "info": {
             "title": "HGW API",
@@ -33,11 +34,32 @@ def create_app():
         "favicon": "./static/hgw_logo.jpeg"
     }
     Swagger(app, template=swagger_template, config=swagger_config)
+
     @app.route("/scalar")
     def scalar_ui():
         return render_template('scalar.html')
+
     db.init_app(app)
     CORS(app)
+
+    # ======================
+    # MODO TESTING
+    # ======================
+    if app.config.get("TESTING"):
+        app.config["SQLALCHEMY_DATABASE_URI"] = "sqlite://"
+        app.config["SQLALCHEMY_TRACK_MODIFICATIONS"] = False
+
+        db.init_app(app)
+
+        # SOLO importar lo necesario para el test
+        from .controllers.User.Carrito.carrito_routes import carrito_bp
+        app.register_blueprint(carrito_bp)
+
+        return app
+
+    # ======================
+    # MODO NORMAL
+    # ======================
     connection = pymysql.connect(
         host=app.config['MYSQL_HOST'],
         user=app.config['MYSQL_USER'],
@@ -49,6 +71,7 @@ def create_app():
     )
     app.config['MYSQL_CONNECTION'] = connection
 
+    # Rutas archivos
     @app.route('/uploads/profile_pictures/<path:filename>')
     def uploaded_profile_picture(filename):
         upload_path = os.path.join(app.root_path, 'uploads', 'profile_pictures')
@@ -64,7 +87,8 @@ def create_app():
         static_path = os.path.join(app.root_path, 'static', 'uploads')
         return send_from_directory(static_path, filename)
 
-    from .controllers.User.user import header_bp
+    # BLUEPRINTS (solo en modo normal)
+    from .controllers.User.Personal.Info_Header import header_bp
     from .controllers.User.InicioSesion.login import login_bp
     from .controllers.User.InicioSesion.register import register_bp
     from .controllers.User.Catalogo.catalogo import catalogo_bp
@@ -74,8 +98,8 @@ def create_app():
     from .controllers.User.Personal.personal import personal_bp
     from .controllers.User.Carrito.carrito_routes import carrito_bp
     from .controllers.User.Educacion.educacion import educacion_bp
-    
     from .controllers.User.Personal.red_multinivel import red_bp
+
     app.register_blueprint(header_bp)
     app.register_blueprint(login_bp)
     app.register_blueprint(register_bp)
@@ -86,8 +110,10 @@ def create_app():
     app.register_blueprint(carrito_bp)
     app.register_blueprint(educacion_bp)
     app.register_blueprint(red_bp)
+
+    # AUTO MAP + create_all (solo en modo normal)
+    from app.models.tablas import tablas, bp_tablas
     with app.app_context():
-        from app.models.tablas import tablas, bp_tablas
         tablas.prepare(
             db.engine,
             reflect=True,
@@ -98,4 +124,5 @@ def create_app():
         )
         app.register_blueprint(bp_tablas)
         db.create_all()
+
     return app
diff --git a/HGW-Flask/app/controllers/Doc/InicioSesion/login.yml b/HGW-Flask/app/controllers/Doc/InicioSesion/login.yml
index 7b06e18..816c3da 100644
--- a/HGW-Flask/app/controllers/Doc/InicioSesion/login.yml
+++ b/HGW-Flask/app/controllers/Doc/InicioSesion/login.yml
@@ -1,3 +1,5 @@
+summary: Endpoint para iniciar sesión de usuario
+description: Este endpoint permite a los usuarios iniciar sesión proporcionando sus credenciales (usuario y contraseña).
 tags:
   - Registro
 consumes:
diff --git a/HGW-Flask/app/controllers/Doc/user.yml b/HGW-Flask/app/controllers/Doc/Personal/Info_Header.yml
similarity index 100%
rename from HGW-Flask/app/controllers/Doc/user.yml
rename to HGW-Flask/app/controllers/Doc/Personal/Info_Header.yml
diff --git a/HGW-Flask/app/controllers/User/Carrito/carrito_routes.py b/HGW-Flask/app/controllers/User/Carrito/carrito_routes.py
index a2632a2..b923b44 100644
--- a/HGW-Flask/app/controllers/User/Carrito/carrito_routes.py
+++ b/HGW-Flask/app/controllers/User/Carrito/carrito_routes.py
@@ -152,7 +152,7 @@ def actualizar_cantidad_carrito():
     id_producto = datos.get("id_producto")
     nueva_cantidad = datos.get("nueva_cantidad")
 
-    if not all([id_usuario, id_producto, nueva_cantidad]):
+    if id_usuario is None or id_producto is None or nueva_cantidad is None:
         return jsonify({"error": "Faltan datos obligatorios"}), 400
 
     if nueva_cantidad <= 0:
@@ -232,7 +232,8 @@ def crear_orden():
         with connection.cursor() as cursor:
             # Insertar orden principal
             cursor.execute(
-                "INSERT INTO ordenes (id_usuario, id_direccion, id_medio_pago, total) VALUES (%s, %s, %s, %s)",
+                "INSERT INTO ordenes (id_usuario, id_direccion, id_medio_pago, total) "
+                "VALUES (%s, %s, %s, %s)",
                 (id_usuario, id_direccion, id_medio_pago, total)
             )
             connection.commit()
@@ -259,7 +260,10 @@ def crear_orden():
 
             #Disminuir cantidad de productos
             for item in items:
-                cursor.execute("UPDATE productos SET stock = stock - %s WHERE id_producto = %s", (item["cantidad"], item["id_producto"]))
+                cursor.execute(
+                    "UPDATE productos SET stock = stock - %s WHERE id_producto = %s",
+                    (item["cantidad"], item["id_producto"])
+                )
                 connection.commit()
 
             # Eliminar carrito
diff --git a/HGW-Flask/app/controllers/User/Catalogo/catalogo.py b/HGW-Flask/app/controllers/User/Catalogo/catalogo.py
index 3aebce0..2f9b2e6 100644
--- a/HGW-Flask/app/controllers/User/Catalogo/catalogo.py
+++ b/HGW-Flask/app/controllers/User/Catalogo/catalogo.py
@@ -1,4 +1,5 @@
 from flask import Blueprint, request, session, current_app, jsonify
+from app.controllers.db import get_db
 from flasgger import swag_from
 
 catalogo_bp = Blueprint('catalogo_bp', __name__)
@@ -6,7 +7,7 @@ catalogo_bp = Blueprint('catalogo_bp', __name__)
 @catalogo_bp.route('/api/catalogo', methods=['GET'])
 @swag_from('../../Doc/Catalogo/catalogo.yml')
 def api_catalogo():
-    connection = current_app.config['MYSQL_CONNECTION']
+    connection = get_db()
     try:
         with connection.cursor() as cursor:
             cursor.execute("""
diff --git a/HGW-Flask/app/controllers/User/Catalogo/productoDet.py b/HGW-Flask/app/controllers/User/Catalogo/productoDet.py
index 5997c07..39a7a43 100644
--- a/HGW-Flask/app/controllers/User/Catalogo/productoDet.py
+++ b/HGW-Flask/app/controllers/User/Catalogo/productoDet.py
@@ -1,4 +1,5 @@
 from flask import jsonify, current_app, request
+from app.controllers.db import get_db
 from .catalogo import catalogo_bp
 from flasgger import swag_from
 
@@ -6,7 +7,7 @@ from flasgger import swag_from
 @swag_from('../../Doc/Catalogo/producto_unico.yml')
 def obtener_producto():
     id = request.args.get('id', type=int)
-    connection = current_app.config['MYSQL_CONNECTION']
+    connection = get_db()
     try:
         with connection.cursor() as cursor:
             cursor.execute("""
diff --git a/HGW-Flask/app/controllers/User/InicioSesion/login.py b/HGW-Flask/app/controllers/User/InicioSesion/login.py
index adaa7e4..0c84ba7 100644
--- a/HGW-Flask/app/controllers/User/InicioSesion/login.py
+++ b/HGW-Flask/app/controllers/User/InicioSesion/login.py
@@ -1,7 +1,8 @@
 from flask import Blueprint, request, current_app, jsonify
 from flask_bcrypt import Bcrypt
+from app.controllers.db import get_db
 import jwt
-from datetime import datetime, timedelta
+from datetime import datetime, timedelta, timezone
 from flasgger import swag_from
 
 login_bp = Blueprint('login_bp', __name__)
@@ -20,7 +21,7 @@ def login():
     if not usuario or not contrasena:
         return jsonify(success=False, message='Debes enviar usuario y contraseña.'), 400
 
-    connection = current_app.config['MYSQL_CONNECTION']
+    connection = get_db()
 
     try:
         with connection.cursor() as cursor:
@@ -45,7 +46,7 @@ def login():
             usuario_encontrado = cursor.fetchone()
 
             if usuario_encontrado and bcrypt.check_password_hash(usuario_encontrado['password'], contrasena):
-                exp_time = datetime.utcnow() + timedelta(days=180)
+                exp_time = datetime.now(timezone.utc) + timedelta(days=180)
                 payload = {
                     "id": usuario_encontrado['id'],
                     "role": usuario_encontrado['role_id'],
diff --git a/HGW-Flask/app/controllers/User/InicioSesion/register.py b/HGW-Flask/app/controllers/User/InicioSesion/register.py
index bf3e845..44acd6d 100644
--- a/HGW-Flask/app/controllers/User/InicioSesion/register.py
+++ b/HGW-Flask/app/controllers/User/InicioSesion/register.py
@@ -1,4 +1,5 @@
 from flask import Blueprint, request,current_app,jsonify,render_template
+from app.controllers.db import get_db
 from flask_bcrypt import Bcrypt
 from werkzeug.utils import secure_filename
 from sqlalchemy import text
@@ -30,10 +31,11 @@ def api_ubicacion_paises():
 @register_bp.route('/api/ubicacion/ciudades', methods=['GET'])
 @swag_from('../../Doc/InicioSesion/Registro/ubicacion_ciudades.yml')
 def api_ubicacion_ciudades():
-    connection = current_app.config['MYSQL_CONNECTION']
     pais_id = request.args.get('paisId')
 
     try:
+        connection = get_db()
+
         with connection.cursor() as cursor:
             if pais_id:
                 query = """
@@ -58,10 +60,9 @@ def api_ubicacion_ciudades():
 @register_bp.route('/api/register', methods=['POST'])
 @swag_from('../../Doc/InicioSesion/Registro/register.yml')
 def register():
-    connection = current_app.config['MYSQL_CONNECTION']
-
     try:
-        # Campos desde el formulario de react
+        connection = get_db()
+
         nombre = request.form.get('nombres')
         apellido = request.form.get('apellido')
         patrocinador = request.form.get('patrocinador')
@@ -106,7 +107,6 @@ def register():
             ruta_foto = rel_path.replace('\\', '/')
 
         with connection.cursor() as cursor:
-            # Insertar usuario (rol 3 = Usuario)
             cursor.execute(
                 """
                 INSERT INTO usuarios 
@@ -119,7 +119,6 @@ def register():
             )
             id_usuario = cursor.lastrowid
 
-            # Insertar dirección (usa ciudad como id_ubicacion)
             cursor.execute(
                 """
                 INSERT INTO direcciones 
diff --git a/HGW-Flask/app/controllers/User/user.py b/HGW-Flask/app/controllers/User/Personal/Info_Header.py
similarity index 97%
rename from HGW-Flask/app/controllers/User/user.py
rename to HGW-Flask/app/controllers/User/Personal/Info_Header.py
index 389a283..4287037 100644
--- a/HGW-Flask/app/controllers/User/user.py
+++ b/HGW-Flask/app/controllers/User/Personal/Info_Header.py
@@ -6,7 +6,7 @@ from flasgger import swag_from
 header_bp = Blueprint('header_bp', __name__)
 
 @header_bp.route("/api/header", methods=["GET"])
-@swag_from('../Doc/user.yml')
+@swag_from('../../Doc/Personal/Info_Header.yml')
 def obtener_usuario():
     user_id = request.args.get("id", type=int)
 
diff --git a/HGW-Flask/app/controllers/User/Personal/personal.py b/HGW-Flask/app/controllers/User/Personal/personal.py
index 7f7fe5f..2742b44 100644
--- a/HGW-Flask/app/controllers/User/Personal/personal.py
+++ b/HGW-Flask/app/controllers/User/Personal/personal.py
@@ -20,6 +20,7 @@ def get_personal():
     try:
         connection = get_db()
         with connection.cursor() as cursor:
+            # Datos del usuario
             cursor.execute("""
                 SELECT u.id_usuario, u.nombre, u.apellido, u.nombre_usuario, u.pss,
                     u.correo_electronico, u.numero_telefono, u.url_foto_perfil,
@@ -32,6 +33,7 @@ def get_personal():
             if not usuario:
                 return jsonify({'success': False, 'message': 'Usuario no encontrado'}), 404
 
+            # Direcciones
             cursor.execute("""
                 SELECT d.id_direccion, d.direccion, d.codigo_postal, d.lugar_entrega,
                     ciudad.id_ubicacion AS ciudad_id, pais.id_ubicacion AS pais_id,
@@ -43,6 +45,7 @@ def get_personal():
             """, (user_id,))
             usuario['direcciones'] = cursor.fetchall()
 
+            # Membresía
             cursor.execute("""
                 SELECT u.membresia, m.nombre_membresia, m.bv AS bv_requeridos, m.precio_membresia,
                        u.bv_acumulados,
@@ -56,7 +59,7 @@ def get_personal():
             """, (user_id,))
             usuario['membresia'] = cursor.fetchone()
 
-            # Historial BV (últimos 10)
+            # Historial de BV
             cursor.execute("""
                 SELECT bv_ganados, fecha_transaccion, descripcion
                 FROM historial_bv 
@@ -77,7 +80,6 @@ def get_personal():
     except Exception as e:
         return jsonify({'success': False, 'message': str(e)}), 500
 
-
 # -------------------- Personal UPDATE --------------------
 @personal_bp.route('/api/personal/update', methods=['PUT'])
 @swag_from('../../Doc/Personal/ControllerPersonal/update_personal.yml')
@@ -86,8 +88,10 @@ def update_personal():
     if not user_id:
         return jsonify({"success": False, "message": "ID de usuario no proporcionado"}), 400
 
-    connection = get_db()
     try:
+        connection = get_db()
+
+        # Manejo de multipart/form-data
         if request.content_type and request.content_type.startswith('multipart/form-data'):
             data = json.loads(request.form.get('data', '{}'))
             foto = request.files.get('foto_perfil')
@@ -96,18 +100,30 @@ def update_personal():
             foto = None
 
         with connection.cursor() as cursor:
+
+            # Verificar usuario
+            cursor.execute("SELECT id_usuario FROM usuarios WHERE id_usuario = %s", (user_id,))
+            if cursor.fetchone() is None:
+                return jsonify({'success': False, 'message': 'Usuario no encontrado'}), 404
+
+            # ---------------------------------------------
+            # Subir foto
+            # ---------------------------------------------
             if foto and foto.filename:
                 cursor.execute("SELECT nombre_usuario, url_foto_perfil FROM usuarios WHERE id_usuario = %s", (user_id,))
-                user_row = cursor.fetchone()
-                if not user_row:
+                row = cursor.fetchone()
+
+                if row is None:
                     return jsonify({'success': False, 'message': 'Usuario no encontrado'}), 404
 
-                nombre_usuario, ruta_anterior = user_row['nombre_usuario'], user_row['url_foto_perfil']
+                nombre_usuario = row.get('nombre_usuario')
+                ruta_anterior = row.get('url_foto_perfil')
                 ext = os.path.splitext(foto.filename)[1]
                 filename = secure_filename(f"{nombre_usuario}{ext}")
                 rel_path = os.path.join('uploads/profile_pictures', filename)
                 abs_path = os.path.join(current_app.root_path, 'static', rel_path)
 
+                # Borrar foto anterior
                 if ruta_anterior:
                     ruta_abs_anterior = os.path.join(current_app.root_path, *ruta_anterior.split('/')[1:])
                     if os.path.exists(ruta_abs_anterior):
@@ -115,35 +131,42 @@ def update_personal():
 
                 os.makedirs(os.path.dirname(abs_path), exist_ok=True)
                 foto.save(abs_path)
+
                 nueva_ruta = "static/" + rel_path.replace('\\', '/')
-                cursor.execute("UPDATE usuarios SET url_foto_perfil = %s WHERE id_usuario = %s", (nueva_ruta, user_id))
+                cursor.execute("UPDATE usuarios SET url_foto_perfil = %s WHERE id_usuario = %s",
+                               (nueva_ruta, user_id))
 
             # Datos usuario
             campos_usuario = [k for k in data.keys() if k not in ['direcciones', 'foto_perfil']]
             if campos_usuario:
-                set_usuario = ', '.join([f"{campo}=%s" for campo in campos_usuario])
-                valores_usuario = [data[campo] for campo in campos_usuario] + [user_id]
-                cursor.execute(f"UPDATE usuarios SET {set_usuario} WHERE id_usuario = %s", valores_usuario)
+                set_usuario = ', '.join([f"{x}=%s" for x in campos_usuario])
+                valores = [data[c] for c in campos_usuario] + [user_id]
+                cursor.execute(f"UPDATE usuarios SET {set_usuario} WHERE id_usuario = %s", valores)
 
             # Direcciones
             for direccion in data.get('direcciones', []):
                 if 'id_direccion' in direccion:
                     set_dir = ', '.join([f"{k}=%s" for k in direccion if k != 'id_direccion'])
-                    valores_dir = [direccion[k] for k in direccion if k != 'id_direccion'] + [direccion['id_direccion']]
-                    cursor.execute(f"UPDATE direcciones SET {set_dir} WHERE id_direccion = %s", valores_dir)
+                    valores = [direccion[k] for k in direccion if k != 'id_direccion'] + [
+                        direccion['id_direccion']
+                    ]
+                    cursor.execute(f"UPDATE direcciones SET {set_dir} WHERE id_direccion = %s", valores)
 
             connection.commit()
-        return jsonify({'success': True, 'message': 'Datos actualizados correctamente'})
+            return jsonify({'success': True, 'message': 'Datos actualizados correctamente'})
+
     except Exception as e:
+        if 'connection' in locals():
+            connection.rollback()
         return jsonify({'success': False, 'message': str(e)}), 500
 
-
 # -------------------- Personal CAMBIAR CONTRASEÑA --------------------
 @personal_bp.route('/api/cambiar-contrasena', methods=['POST'])
 @swag_from('../../Doc/Personal/ControllerPersonal/cambiar_contrasena.yml')
 def cambiar_contrasena():
     data = request.json
     user_id, actual, nueva = data.get('id_usuario'), data.get('actual'), data.get('nueva')
+
     if not user_id or not actual or not nueva:
         return jsonify({'success': False, 'message': 'Datos incompletos'}), 400
 
@@ -158,11 +181,16 @@ def cambiar_contrasena():
             if not bcrypt.check_password_hash(row['pss'], actual):
                 return jsonify({'success': False, 'message': 'La contraseña actual es incorrecta'}), 401
 
-            hash_nueva = bcrypt.generate_password_hash(nueva).decode('utf-8')
-            cursor.execute("UPDATE usuarios SET pss = %s WHERE id_usuario = %s", (hash_nueva, user_id))
+            nueva_hash = bcrypt.generate_password_hash(nueva).decode('utf-8')
+            cursor.execute("UPDATE usuarios SET pss = %s WHERE id_usuario = %s",
+                           (nueva_hash, user_id))
             connection.commit()
+
         return jsonify({'success': True, 'message': 'Contraseña actualizada correctamente'})
+
     except Exception as e:
+        if 'connection' in locals():
+            connection.rollback()
         return jsonify({'success': False, 'message': str(e)}), 500
 
 # -------------------- Personal DELETE --------------------
@@ -170,6 +198,7 @@ def cambiar_contrasena():
 @swag_from('../../Doc/Personal/ControllerPersonal/delete_foto_perfil.yml')
 def delete_foto_perfil():
     user_id = request.args.get("id", type=int)
+
     if not user_id:
         return jsonify({"success": False, "message": "ID de usuario no proporcionado"}), 400
 
@@ -178,6 +207,7 @@ def delete_foto_perfil():
         with connection.cursor() as cursor:
             cursor.execute("SELECT url_foto_perfil FROM usuarios WHERE id_usuario = %s", (user_id,))
             row = cursor.fetchone()
+
             if not row or not row['url_foto_perfil']:
                 return jsonify({'success': False, 'message': 'No hay foto para borrar'}), 404
 
@@ -186,26 +216,31 @@ def delete_foto_perfil():
             if os.path.exists(ruta_abs):
                 os.remove(ruta_abs)
 
-            cursor.execute("UPDATE usuarios SET url_foto_perfil = NULL WHERE id_usuario = %s", (user_id,))
+            cursor.execute("UPDATE usuarios SET url_foto_perfil = NULL WHERE id_usuario = %s",
+                           (user_id,))
             connection.commit()
-        return jsonify({'success': True, 'message': 'Foto de perfil eliminada'})
+
+        return jsonify({'success': True, 'message': 'Foto eliminada'})
+
     except Exception as e:
+        if 'connection' in locals():
+            connection.rollback()
         return jsonify({'success': False, 'message': str(e)}), 500
     
     # -------------------- Crear nueva dirección --------------------
 @personal_bp.route('/api/direcciones/crear', methods=['POST'])
 def crear_direccion():
     data = request.json
-    
-    # Validar datos requeridos
-    required_fields = ['id_usuario', 'lugar_entrega', 'direccion', 'ciudad', 'pais', 'codigo_postal']
-    for field in required_fields:
-        if field not in data:
-            return jsonify({'success': False, 'message': f'Campo {field} es requerido'}), 400
-    
+    required = ['id_usuario', 'lugar_entrega', 'direccion', 'ciudad', 'pais', 'codigo_postal']
+
+    for f in required:
+        if f not in data:
+            return jsonify({'success': False, 'message': f'Campo {f} es requerido'}), 400
+
     try:
         connection = get_db()
         with connection.cursor() as cursor:
+
             cursor.execute("""
                 SELECT ciudad.id_ubicacion 
                 FROM ubicaciones ciudad
@@ -217,8 +252,7 @@ def crear_direccion():
             ubicacion = cursor.fetchone()
             if not ubicacion:
                 return jsonify({'success': False, 'message': 'Ciudad o país no válido'}), 400
-            
-            id_ubicacion = ubicacion['id_ubicacion']
+
             cursor.execute("""
                 INSERT INTO direcciones (id_usuario, direccion, codigo_postal, id_ubicacion, lugar_entrega)
                 VALUES (%s, %s, %s, %s, %s)
@@ -226,21 +260,22 @@ def crear_direccion():
                 data['id_usuario'],
                 data['direccion'],
                 data['codigo_postal'],
-                id_ubicacion,
+                ubicacion['id_ubicacion'],
                 data['lugar_entrega']
             ))
             
+
             connection.commit()
-            id_direccion = cursor.lastrowid
-            
             return jsonify({
-                'success': True, 
-                'message': 'Dirección creada exitosamente',
-                'id_direccion': id_direccion
+                'success': True,
+                'message': 'Dirección creada',
+                'id_direccion': cursor.lastrowid
             }), 201
             
+
     except Exception as e:
-        connection.rollback()
+        if 'connection' in locals():
+            connection.rollback()
         return jsonify({'success': False, 'message': str(e)}), 500
 
 # -------------------- Obtener solo direcciones --------------------
@@ -253,17 +288,18 @@ def get_direcciones():
     try:
         connection = get_db()
         with connection.cursor() as cursor:
+
             cursor.execute("""
                 SELECT d.id_direccion AS id, d.direccion, d.codigo_postal, d.lugar_entrega,
-                    ciudad.nombre AS ciudad, pais.nombre AS pais
+                       ciudad.nombre AS ciudad, pais.nombre AS pais
                 FROM direcciones d
                 LEFT JOIN ubicaciones ciudad ON d.id_ubicacion = ciudad.id_ubicacion
                 LEFT JOIN ubicaciones pais ON ciudad.ubicacion_padre = pais.id_ubicacion
                 WHERE d.id_usuario = %s
             """, (user_id,))
-            direcciones = cursor.fetchall()
-            
-            return jsonify({'success': True, 'direcciones': direcciones})
+
+            return jsonify({'success': True, 'direcciones': cursor.fetchall()})
+
     except Exception as e:
         return jsonify({'success': False, 'message': str(e)}), 500
 
@@ -273,11 +309,10 @@ def get_ubicaciones():
     try:
         connection = get_db()
         with connection.cursor() as cursor:
-            # Obtener países
+
             cursor.execute("SELECT id_ubicacion, nombre FROM ubicaciones WHERE tipo = 'pais'")
             paises = cursor.fetchall()
-            
-            # Obtener ciudades agrupadas por país
+
             ubicaciones = {}
             for pais in paises:
                 cursor.execute("""
@@ -288,7 +323,9 @@ def get_ubicaciones():
                 ciudades = cursor.fetchall()
                 ubicaciones[pais['nombre']] = [c['nombre'] for c in ciudades]
             
+
             return jsonify({'success': True, 'ubicaciones': ubicaciones})
+
     except Exception as e:
         return jsonify({'success': False, 'message': str(e)}), 500
     # -------------------- Eliminar dirección --------------------
@@ -297,26 +334,28 @@ def eliminar_direccion():
     data = request.json
     direccion_id = data.get('id_direccion')
     user_id = data.get('id_usuario')
-    
+
     if not direccion_id or not user_id:
         return jsonify({'success': False, 'message': 'Datos incompletos'}), 400
-    
+
     try:
         connection = get_db()
         with connection.cursor() as cursor:
-            # Verificar que la dirección pertenezca al usuario
+
             cursor.execute("""
                 SELECT id_direccion FROM direcciones 
                 WHERE id_direccion = %s AND id_usuario = %s
             """, (direccion_id, user_id))
-            
+
             if not cursor.fetchone():
                 return jsonify({'success': False, 'message': 'Dirección no encontrada'}), 404
-            
+
             cursor.execute("DELETE FROM direcciones WHERE id_direccion = %s", (direccion_id,))
             connection.commit()
-            
-            return jsonify({'success': True, 'message': 'Dirección eliminada exitosamente'})
+
+            return jsonify({'success': True, 'message': 'Dirección eliminada'})
+
     except Exception as e:
-        connection.rollback()
-        return jsonify({'success': False, 'message': str(e)}), 500
\ No newline at end of file
+        if 'connection' in locals():
+            connection.rollback()
+        return jsonify({'success': False, 'message': str(e)}), 500
diff --git a/HGW-Flask/app/controllers/User/admin.py b/HGW-Flask/app/controllers/User/admin.py
deleted file mode 100644
index 9ac991b..0000000
--- a/HGW-Flask/app/controllers/User/admin.py
+++ /dev/null
@@ -1,9 +0,0 @@
-from flask import Blueprint, jsonify
-
-admin_bp = Blueprint('admin', __name__)
-
-@admin_bp.route("/api/administrador", methods=["GET"])
-def dashboard():
-
-    
-    return "Admin dashboard"
diff --git a/HGW-Flask/app/controllers/User/mod.py b/HGW-Flask/app/controllers/User/mod.py
deleted file mode 100644
index d686487..0000000
--- a/HGW-Flask/app/controllers/User/mod.py
+++ /dev/null
@@ -1,7 +0,0 @@
-from flask import Blueprint, jsonify
-
-mod_bp = Blueprint('mod', __name__)
-
-@mod_bp.route("/api/moderador", methods=["GET"])
-def dashboard():
-    return "Moderador"
diff --git a/HGW-Flask/app/controllers/User/utils/datosProductos.py b/HGW-Flask/app/controllers/User/utils/datosProductos.py
deleted file mode 100644
index 2fb145d..0000000
--- a/HGW-Flask/app/controllers/User/utils/datosProductos.py
+++ /dev/null
@@ -1,25 +0,0 @@
-from app.controllers.db import get_db
-import traceback
-
-def obtener_productos():
-    try:
-        connection = get_db()
-        with connection.cursor() as cursor:
-            cursor.execute("""
-                SELECT 
-                    p.id_producto, 
-                    c.nombre_categoria AS categoria,
-                    sc.nombre_subcategoria AS subcategoria,
-                    p.nombre_producto AS nombre,
-                    p.precio_producto AS precio, 
-                    p.imagen_producto AS imagen, 
-                    p.stock
-                FROM productos p
-                JOIN categorias c ON p.categoria = c.id_categoria
-                JOIN subcategoria sc ON p.subcategoria = sc.id_subcategoria
-            """)
-            productos = cursor.fetchall()
-            return productos
-    except Exception as e:
-        print("Error en obtener_productos:\n", traceback.format_exc())
-        return f"{type(e).__name__}: {e}"
diff --git a/HGW-Flask/app/controllers/User/utils/datosUsuario.py b/HGW-Flask/app/controllers/User/utils/datosUsuario.py
deleted file mode 100644
index 3941a59..0000000
--- a/HGW-Flask/app/controllers/User/utils/datosUsuario.py
+++ /dev/null
@@ -1,36 +0,0 @@
-from flask import session, redirect, url_for, current_app
-from decimal import Decimal
-
-def obtener_usuario_actual(identificador=1):
-    connection = current_app.config['MYSQL_CONNECTION']
-    try:
-        with connection.cursor() as cursor:
-            cursor.execute("""
-                SELECT * FROM usuarios
-                JOIN membresias ON usuarios.membresia = membresias.id_membresia
-                WHERE id_usuario = %s
-            """, (identificador,))
-            user = cursor.fetchone()
-            if not user:
-                return "Usuario no encontrado"
-
-            cursor.execute("""
-                SELECT COALESCE(SUM(pc.cantidad_producto), 0) AS total_carrito
-                FROM carrito_compras c
-                JOIN productos_carrito pc ON c.id_carrito = pc.carrito
-                WHERE c.id_usuario = %s
-            """, (identificador,))
-            carrito = cursor.fetchone()
-            total_carrito = carrito['total_carrito'] if carrito else 0
-
-            user['total_carrito'] = total_carrito
-
-            # Convertir cualquier Decimal en el diccionario a float
-            for key, value in user.items():
-                if isinstance(value, Decimal):
-                    user[key] = float(value)
-
-            return user
-
-    except Exception as e:
-        return str(e)
diff --git a/HGW-Flask/app/models/tablas.py b/HGW-Flask/app/models/tablas.py
index 8ecf15b..f88a05f 100644
--- a/HGW-Flask/app/models/tablas.py
+++ b/HGW-Flask/app/models/tablas.py
@@ -10,6 +10,7 @@ from flasgger import swag_from
 from app.controllers.User.utils.upload_image import upload_image_to_supabase
 
 tablas = automap_base()
+classes = tablas.classes
 bcrypt = Bcrypt()
 
 def get_fk_display(obj):
@@ -36,7 +37,6 @@ def serializar_con_fk_lookup(objetos):
         data = {}
         for col in o.__table__.columns:
             valor = getattr(o, col.name)
-            
             if col.name in fk_tablas and valor is not None:
                 try:
                     clase_fk = getattr(tablas.classes, fk_tablas[col.name])
@@ -49,7 +49,6 @@ def serializar_con_fk_lookup(objetos):
                         continue
                 except Exception:
                     pass
-            
             if(col.name != "creador" and col.name != "editor" and col.name != "activo"):
                 data[col.name] = valor
         lista.append(data)
@@ -61,8 +60,6 @@ def get_tabla(nombre):
     claves = {k.lower(): k for k in tablas.classes.keys()}
     return tablas.classes.get(claves.get(nombre.lower()))
 
-# ---------------- RUTAS ---------------- #
-
 @bp_tablas.route("/registro", methods=["POST","OPTIONS"])
 @cross_origin()
 @swag_from('../controllers/Doc/Tablas/registros.yml')
@@ -132,7 +129,6 @@ def consultaTabla():
     req = request.get_json()
     tabla_nombre = req.get("table")
     tabla = get_tabla(tabla_nombre)
-    
     if not tabla:
         return jsonify({"error": f"Tabla '{tabla_nombre}' no encontrada"}), 400
 
@@ -156,8 +152,7 @@ def consultaTabla():
             columnas = [{"name": col.replace("_", " ").title(), "field": col} for col in result.keys()]
             filas = [dict(row._mapping) for row in result]
             return jsonify({"filas": filas, "columnas": columnas})
-        except Exception as e:
-            print(f"Error en query de órdenes: {e}")
+        except Exception:
             pass
 
     objetos = db.session.query(tabla).all()
@@ -173,7 +168,6 @@ def consultaTabla():
 def orden_detalle(id_orden):
     if request.method == "OPTIONS":
         return Response(status=200)
-    
     from sqlalchemy import text
     try:
         query_orden = text("""
@@ -200,10 +194,8 @@ def orden_detalle(id_orden):
         """)
         result_orden = db.session.execute(query_orden, {"id_orden": id_orden})
         orden = dict(result_orden.fetchone()._mapping) if result_orden.rowcount > 0 else None
-        
         if not orden:
             return jsonify({"error": "Orden no encontrada"}), 404
-        
         query_productos = text("""
             SELECT 
                 p.nombre_producto,
@@ -219,14 +211,11 @@ def orden_detalle(id_orden):
         """)
         result_productos = db.session.execute(query_productos, {"id_orden": id_orden})
         productos = [dict(row._mapping) for row in result_productos]
-        
         return jsonify({
             "orden": orden,
             "productos": productos
         }), 200
-        
-    except Exception as e:
-        print(f"Error en orden_detalle: {e}")
+    except Exception:
         return jsonify({"error": "Error al obtener detalle de orden"}), 500
 
 @bp_tablas.route("/eliminar", methods=["POST","OPTIONS"])
@@ -239,7 +228,6 @@ def eliminar():
     tabla = get_tabla(datos["table"])
     if not tabla:
         return jsonify({"error": f"Tabla '{datos['table']}' no encontrada"}), 400
-
     elemento = db.session.get(tabla, datos["id"])
     if not elemento:
         return jsonify({"error": "Registro no encontrado"}), 404
@@ -257,7 +245,6 @@ def consultaFilas():
     tabla = get_tabla(datos["table"])
     if not tabla:
         return jsonify({"error": f"Tabla '{datos['table']}' no encontrada"}), 400
-
     elemento = db.session.get(tabla, datos["id"])
     if not elemento:
         return jsonify({}), 404
@@ -273,12 +260,10 @@ def editar():
     tablaActual = get_tabla(request.form["table"])
     if not tablaActual:
         return jsonify({"error": f"Tabla '{request.form['table']}' no encontrada"}), 400
-
     id = request.form["id"]
     elementoG = db.session.get(tablaActual, id)
     if not elementoG:
         return jsonify({"error": "Registro no encontrado"}), 404
-
     id_usuario = ""
     import json
     import re
@@ -305,34 +290,27 @@ def editar():
                 lista = json.loads(valor)
             except (json.JSONDecodeError, TypeError):
                 lista = valor
-
             if clave == "id_usuario":
                 id_usuario = lista if not isinstance(lista, dict) else lista.get("text", "")
-
             if isinstance(lista, dict) and "password" in lista:
                 nuevo_val = _extract_text_from_maybe_json(lista)
                 hash_actual = getattr(elementoG, "pss", None)
-
                 if isinstance(nuevo_val, str) and nuevo_val == hash_actual:
                     valor_a_guardar = hash_actual
                 elif isinstance(nuevo_val, str):
                     valor_a_guardar = bcrypt.generate_password_hash(nuevo_val).decode("utf-8")
                 else:
                     valor_a_guardar = hash_actual
-
                 setattr(elementoG, clave, valor_a_guardar)
-
             elif isinstance(lista, dict) and "text" in lista:
                 valor_a_guardar = _extract_text_from_maybe_json(lista)
                 setattr(elementoG, clave, valor_a_guardar)
-
             else:
                 if clave not in ("table", "id", "req"):
                     if isinstance(lista, str) and lista == "":
                         lista = None
                     setattr(elementoG, clave, lista)
-
-        except Exception as e:
+        except Exception:
             if clave not in ("table", "id", "req"):
                 val_to_set = valor
                 if isinstance(val_to_set, str) and val_to_set == "":
@@ -345,11 +323,9 @@ def editar():
     for clave, archivo in request.files.items():
         url, filename = upload_image_to_supabase(archivo, folder=request.form["table"])
         setattr(elementoG, clave, url)
-
     db.session.commit()
     return jsonify({"respuesta": "Se actualizó el registro"})
 
-
 @bp_tablas.route("/consultasInformes", methods = ["POST"])
 def consultasInformes():
     datos = request.get_json()
diff --git a/HGW-Flask/config.py b/HGW-Flask/config.py
index a304031..cf9ce82 100644
--- a/HGW-Flask/config.py
+++ b/HGW-Flask/config.py
@@ -4,15 +4,17 @@ import os
 load_dotenv()
 
 class Config:
-    SECRET_KEY = os.getenv("SECRET_KEY")
+    JWT_SECRET_KEY = os.getenv("JWT_SECRET_KEY")
     MYSQL_HOST = os.getenv("MYSQL_HOST")
     MYSQL_USER = os.getenv("MYSQL_USER")
     MYSQL_PASSWORD = os.getenv("MYSQL_PASSWORD")
     MYSQL_DB = os.getenv("MYSQL_DB")
     MYSQL_PORT = int(os.getenv("MYSQL_PORT"))
+
     SQLALCHEMY_DATABASE_URI = (
         f"mysql+pymysql://{MYSQL_USER}:{MYSQL_PASSWORD}@"
         f"{MYSQL_HOST}:{MYSQL_PORT}/{MYSQL_DB}"
     )
+
     SQLALCHEMY_TRACK_MODIFICATIONS = False
     SESSION_COOKIE_SECURE = False
diff --git a/HGW-Flask/example.env b/HGW-Flask/example.env
index 0a1be20..700e70d 100644
--- a/HGW-Flask/example.env
+++ b/HGW-Flask/example.env
@@ -4,7 +4,7 @@ MYSQL_PASSWORD = password
 MYSQL_DB = database
 MYSQL_PORT = 3306
 
-SECRET_KEY = Secret_Key
+JWT_SECRET_KEY = clave_secreta_jwt
 
 SUPABASE_URL = 
 SUPABASE_KEY = 
diff --git a/HGW-Flask/pytest.ini b/HGW-Flask/pytest.ini
new file mode 100644
index 0000000..dcebda1
--- /dev/null
+++ b/HGW-Flask/pytest.ini
@@ -0,0 +1,7 @@
+[pytest]
+filterwarnings =
+    ignore::DeprecationWarning:werkzeug.*
+    ignore::DeprecationWarning:ast.*
+    ignore::sqlalchemy.exc.SAWarning
+    ignore::sqlalchemy.exc.RemovedIn20Warning
+    ignore:Deprecated API features detected!
diff --git a/HGW-Flask/requirements.txt b/HGW-Flask/requirements.txt
index 56ba8b5..a657e26 100644
--- a/HGW-Flask/requirements.txt
+++ b/HGW-Flask/requirements.txt
@@ -13,6 +13,7 @@ flasgger==0.9.7.1
 Flask==2.0.3
 Flask-Bcrypt==0.7.1
 flask-cors==6.0.1
+Flask-JWT-Extended==4.7.1
 Flask-SQLAlchemy==2.5.1
 greenlet==3.2.3
 gunicorn==21.2.0
diff --git a/HGW-Flask/tests/Carrito/test_actualizar_cantidad_carrito.py b/HGW-Flask/tests/Carrito/test_actualizar_cantidad_carrito.py
new file mode 100644
index 0000000..22d8beb
--- /dev/null
+++ b/HGW-Flask/tests/Carrito/test_actualizar_cantidad_carrito.py
@@ -0,0 +1,27 @@
+import json
+
+def test_actualizar_cantidad_missing(client):
+    resp = client.put("/api/carrito/actualizar", json={})
+    assert resp.status_code == 400
+
+def test_actualizar_cantidad_invalida(client):
+    payload = {
+        "id_usuario": 1, 
+        "id_producto": 2, 
+        "nueva_cantidad": 0
+    }
+    resp = client.put("/api/carrito/actualizar", json=payload)
+    assert resp.status_code == 400
+    body = resp.get_json()
+    assert "La cantidad debe ser mayor a 0" in body.get("error", "") or "cantidad" in body.get("error", "")
+
+def test_actualizar_cantidad_exitoso(monkeypatch, client, fake_conn):
+    monkeypatch.setattr("app.controllers.db.get_db", lambda: fake_conn)
+    payload = {
+        "id_usuario": 1, 
+        "id_producto": 2, 
+        "nueva_cantidad": 3
+    }
+    resp = client.put("/api/carrito/actualizar", json=payload)
+    assert resp.status_code == 200
+    assert "mensaje" in resp.get_json()
diff --git a/HGW-Flask/tests/Carrito/test_agregar_producto_carrito.py b/HGW-Flask/tests/Carrito/test_agregar_producto_carrito.py
new file mode 100644
index 0000000..0b10bf3
--- /dev/null
+++ b/HGW-Flask/tests/Carrito/test_agregar_producto_carrito.py
@@ -0,0 +1,37 @@
+import json
+
+def test_agregar_producto_carrito_missing_data(client):
+    resp = client.post("/api/carrito/agregar", json={})
+    assert resp.status_code == 400
+    assert "error" in resp.get_json()
+
+def test_agregar_producto_carrito_crea_carrito_y_agrega(monkeypatch, client, fake_conn):
+    cursor = fake_conn.cursor()
+    # Secuencia de fetchone() en el controlador:
+    # 1. SELECT id_carrito -> None (no carrito)
+    # 2. SELECT id_carrito AFTER INSERT -> {'id_carrito': 10}
+    # 3. SELECT cantidad_producto para producto existente -> None (no existente)
+    cursor.set_fetchone_responses([None, {"id_carrito": 10}, None])
+
+    monkeypatch.setattr("app.controllers.db.get_db", lambda: fake_conn)
+
+    payload = {"id_usuario": 7, "id_producto": 3, "cantidad": 2}
+    resp = client.post("/api/carrito/agregar", json=payload)
+    assert resp.status_code == 200
+    body = resp.get_json()
+    assert "mensaje" in body
+    assert "Producto agregado" in body["mensaje"] or "agregado" in body["mensaje"]
+
+def test_agregar_producto_carrito_incrementa(monkeypatch, client, fake_conn):
+    cursor = fake_conn.cursor()
+    # 1. SELECT id_carrito -> {'id_carrito': 5}
+    # 2. SELECT cantidad_producto -> {'cantidad_producto': 2} (existe)
+    cursor.set_fetchone_responses([{"id_carrito": 5}, {"cantidad_producto": 2}])
+
+    monkeypatch.setattr("app.controllers.db.get_db", lambda: fake_conn)
+
+    payload = {"id_usuario": 7, "id_producto": 3, "cantidad": 1}
+    resp = client.post("/api/carrito/agregar", json=payload)
+    assert resp.status_code == 200
+    body = resp.get_json()
+    assert "mensaje" in body
diff --git a/HGW-Flask/tests/Carrito/test_crear_orden.py b/HGW-Flask/tests/Carrito/test_crear_orden.py
new file mode 100644
index 0000000..169879f
--- /dev/null
+++ b/HGW-Flask/tests/Carrito/test_crear_orden.py
@@ -0,0 +1,40 @@
+import json
+
+def test_crear_orden_sin_payload(client):
+    resp = client.post("/api/ordenes", json=None)
+    assert resp.status_code == 400
+
+def test_crear_orden_faltan_campos(client):
+    payload = {"id_usuario": 1, "items": []}
+    resp = client.post("/api/ordenes", json=payload)
+    assert resp.status_code == 400
+    body = resp.get_json()
+    assert "faltan" in body or "error" in body
+
+def test_crear_orden_exitoso(monkeypatch, client, fake_conn):
+    cursor = fake_conn.cursor()
+    # El controlador hace:
+    # - INSERT orden -> commit
+    # - SELECT LAST_INSERT_ID() -> fetchone -> {'id_orden': 55}
+    # Según eso, configuramos fetchone_responses para devolver id_orden
+    cursor.set_fetchone_responses([{"id_orden": 55}])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Carrito.carrito_routes.get_db",
+        lambda: fake_conn)
+
+    payload = {
+        "id_usuario": 2,
+        "id_direccion": 1,
+        "id_medio_pago": 1,
+        "total": 25000,
+        "items": [
+            {"id_producto": 1, "cantidad": 2, "precio_unitario": 5000},
+            {"id_producto": 2, "cantidad": 1, "precio_unitario": 15000}
+        ]
+    }
+    resp = client.post("/api/ordenes", json=payload)
+    assert resp.status_code == 201
+    body = resp.get_json()
+    assert "id_orden" in body
+    assert body["id_orden"] > 0
diff --git a/HGW-Flask/tests/Carrito/test_eliminar_producto_carrito.py b/HGW-Flask/tests/Carrito/test_eliminar_producto_carrito.py
new file mode 100644
index 0000000..cd6bdb6
--- /dev/null
+++ b/HGW-Flask/tests/Carrito/test_eliminar_producto_carrito.py
@@ -0,0 +1,17 @@
+import json
+
+def test_eliminar_producto_carrito_missing_data(client):
+    resp = client.delete("/api/carrito/eliminar", json={})
+    assert resp.status_code == 400
+    assert "error" in resp.get_json()
+
+def test_eliminar_producto_carrito_exitoso(monkeypatch, client, fake_conn):
+    
+    # no fetch needed, solo ejecutar y commit
+    monkeypatch.setattr("app.controllers.db.get_db", lambda: fake_conn)
+
+    payload = {"id_usuario": 9, "id_producto": 4}
+    resp = client.delete("/api/carrito/eliminar", json=payload)
+    assert resp.status_code == 200
+    body = resp.get_json()
+    assert "mensaje" in body
diff --git a/HGW-Flask/tests/Carrito/test_listar_medios_pago.py b/HGW-Flask/tests/Carrito/test_listar_medios_pago.py
new file mode 100644
index 0000000..fbc5a39
--- /dev/null
+++ b/HGW-Flask/tests/Carrito/test_listar_medios_pago.py
@@ -0,0 +1,27 @@
+def test_listar_medios_pago(monkeypatch, client, fake_conn, app):
+
+    fake_conn.reset()
+    
+    medios = [
+        {
+            "id_medio": 1, 
+            "nombre_medio": 
+            "Tarjeta"
+        }, 
+        {
+            "id_medio": 2, 
+            "nombre_medio": "Efectivo"
+        }
+    ]
+    fake_conn.set_fetchall_responses([medios])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Carrito.carrito_routes.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/medios-pago")
+    assert resp.status_code == 200
+    body = resp.get_json()
+    assert isinstance(body, list)
+    assert len(body) >= 1
diff --git a/HGW-Flask/tests/Carrito/test_obtener_carrito.py b/HGW-Flask/tests/Carrito/test_obtener_carrito.py
new file mode 100644
index 0000000..f85f607
--- /dev/null
+++ b/HGW-Flask/tests/Carrito/test_obtener_carrito.py
@@ -0,0 +1,61 @@
+import json
+
+def test_obtener_carrito_missing_id(client):
+    resp = client.get("/api/carrito")
+    assert resp.status_code == 400
+    body = resp.get_json()
+    assert "error" in body
+
+def test_obtener_carrito_elimina_e_informa(monkeypatch, client, fake_conn):
+    # configurar fetchall: primero productos_eliminados, luego productos activos
+    productos_eliminados = [{"nombre_producto": "Leche"}]
+    productos_activos = [
+        {
+            "id_producto": 1,
+            "nombre_producto": "Pan",
+            "imagen_producto": "img.jpg",
+            "precio_producto": 1000,
+            "cantidad_producto": 2,
+            "stock": 10
+        }
+    ]
+    
+    fake_conn.set_fetchall_responses([
+        productos_eliminados,
+        productos_activos
+    ])
+
+    # patchear get_db para que devuelva fake_conn
+    monkeypatch.setattr(
+        "app.controllers.User.Carrito.carrito_routes.get_db",
+        lambda: fake_conn
+    )
+
+
+    resp = client.get("/api/carrito?id=5")
+    assert resp.status_code == 200
+    body = resp.get_json()
+    assert body["success"] is True
+    assert "productos" in body
+    assert "eliminados" in body
+    assert "Leche" in body["eliminados"]
+
+def test_obtener_carrito_vacio(monkeypatch, client, fake_conn):
+    
+    fake_conn.set_fetchall_responses([
+        [], []
+    ])
+    monkeypatch.setattr(
+        "app.controllers.User.Carrito.carrito_routes.get_db",
+        lambda: fake_conn
+    )
+
+
+    resp = client.get("/api/carrito?id=1")
+    body = resp.get_json()
+
+    assert resp.status_code == 200
+    assert body["success"] is True
+    assert body["productos"] == []
+
+    assert "El carrito está vacío" in body.get("mensaje", "") or "carrito" in body.get("mensaje", "")
diff --git a/HGW-Flask/tests/Carrito/test_obtener_direcciones.py b/HGW-Flask/tests/Carrito/test_obtener_direcciones.py
new file mode 100644
index 0000000..8a2976f
--- /dev/null
+++ b/HGW-Flask/tests/Carrito/test_obtener_direcciones.py
@@ -0,0 +1,31 @@
+def test_obtener_direcciones(monkeypatch, client, fake_conn):
+
+    fake_conn.reset()
+
+    direcciones = [
+        {
+            "id_usuario": 2,
+            "id_direccion": 10,
+            "direccion": "Calle 123",
+            "codigo_postal": "11001",
+            "lugar_entrega": "Casa",
+            "ciudad_id": 100,
+            "pais_id": 1,
+            "ciudad": "Bogotá",
+            "pais": "Colombia"
+        }
+    ]
+
+    fake_conn.set_fetchall_responses([direcciones])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Carrito.carrito_routes.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/direcciones?id=1")
+    body = resp.get_json()
+
+    assert resp.status_code == 200
+    assert body["success"] is True
+    assert len(body["direcciones"]) >= 1
diff --git a/HGW-Flask/tests/Catalogo/test_catalogo.py b/HGW-Flask/tests/Catalogo/test_catalogo.py
new file mode 100644
index 0000000..88b0715
--- /dev/null
+++ b/HGW-Flask/tests/Catalogo/test_catalogo.py
@@ -0,0 +1,47 @@
+import pytest
+
+def test_catalogo_exitoso(monkeypatch, client, fake_conn):
+    fake_data = [
+        {"id_categoria": 1, "nombre_categoria": "Bebidas",
+            "id_subcategoria": 10, "nombre_subcategoria": "Jugos"},
+        {"id_categoria": 2, "nombre_categoria": "Frutas",
+            "id_subcategoria": 20, "nombre_subcategoria": "Cítricos"},
+    ]
+
+    fake_conn.set_fetchall_responses([fake_data])
+
+    monkeypatch.setattr("app.controllers.User.Catalogo.catalogo.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/catalogo")
+
+    assert resp.status_code == 200
+    body = resp.get_json()
+
+    assert isinstance(body, list)
+    assert len(body) == 2
+    assert body[0]["nombre_categoria"] == "Bebidas"
+
+
+def test_catalogo_vacio(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchall_responses([[]])
+
+    monkeypatch.setattr("app.controllers.User.Catalogo.catalogo.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/catalogo")
+    assert resp.status_code == 200
+
+    body = resp.get_json()
+    assert body == []
+
+
+def test_catalogo_error_bd(monkeypatch, client):
+
+    class FakeBadConn:
+        def cursor(self):
+            raise Exception("Error de prueba")
+
+    monkeypatch.setattr("app.controllers.User.Catalogo.catalogo.get_db", lambda: FakeBadConn())
+
+    resp = client.get("/api/catalogo")
+    assert resp.status_code == 200
+    assert "Error de prueba" in resp.get_data(as_text=True)
diff --git a/HGW-Flask/tests/Catalogo/test_producto.py b/HGW-Flask/tests/Catalogo/test_producto.py
new file mode 100644
index 0000000..30794d0
--- /dev/null
+++ b/HGW-Flask/tests/Catalogo/test_producto.py
@@ -0,0 +1,78 @@
+import json
+
+
+def test_obtener_productos_exitoso(monkeypatch, client, fake_conn):
+    # Datos simulados de la BD
+    fake_products = [
+        {
+            "id_producto": 1,
+            "categoria": "Bebidas",
+            "subcategoria": "Jugos",
+            "nombre": "Jugo de Naranja",
+            "precio": 5000,
+            "puntos_bv": 10,
+            "imagen": "jugo.png",
+            "stock": 20
+        },
+        {
+            "id_producto": 2,
+            "categoria": "Snacks",
+            "subcategoria": "Chocolates",
+            "nombre": "Chocolate Bar",
+            "precio": 3000,
+            "puntos_bv": 5,
+            "imagen": "choco.png",
+            "stock": 15
+        }
+    ]
+
+    # Configurar respuestas del fake cursor
+    fake_conn.set_fetchall_responses([fake_products])
+
+    # Parche correcto del import REAL usado por el controlador
+    monkeypatch.setattr(
+        "app.controllers.User.Catalogo.producto.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/productos")
+    assert resp.status_code == 200
+
+    body = resp.get_json()
+    assert isinstance(body, list)
+    assert len(body) == 2
+    assert body[0]["nombre"] == "Jugo de Naranja"
+
+
+def test_obtener_productos_vacio(monkeypatch, client, fake_conn):
+    # Sin productos
+    fake_conn.set_fetchall_responses([[]])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Catalogo.producto.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/productos")
+    assert resp.status_code == 200
+    assert resp.get_json() == []
+
+
+def test_obtener_productos_error_bd(monkeypatch, client):
+
+    class FakeBadConn:
+        def cursor(self):
+            raise Exception("Falla en BD")
+
+    # Parcheo correcto
+    monkeypatch.setattr(
+        "app.controllers.User.Catalogo.producto.get_db",
+        lambda: FakeBadConn()
+    )
+
+    resp = client.get("/api/productos")
+    assert resp.status_code == 500
+
+    body = resp.get_json()
+    assert "error" in body
+    assert body["error"] == "Error interno al obtener productos"
diff --git a/HGW-Flask/tests/Catalogo/test_productoDet.py b/HGW-Flask/tests/Catalogo/test_productoDet.py
new file mode 100644
index 0000000..6c8f8ac
--- /dev/null
+++ b/HGW-Flask/tests/Catalogo/test_productoDet.py
@@ -0,0 +1,68 @@
+import json
+
+def test_producto_unico_exitoso(monkeypatch, client, fake_conn):
+    # Datos simulados del producto
+    fake_product = {
+        "id_producto": 5,
+        "nombre": "Gaseosa Cola",
+        "precio": 2500,
+        "puntos_bv": 8,
+        "imagen": "cola.png",
+        "imagenes": "img1.png,img2.png",
+        "descripcion": "Bebida refrescante",
+        "stock": 50,
+        "categoria": "Bebidas",
+        "subcategoria": "Gaseosas"
+    }
+
+    # Configurar respuesta del cursor
+    fake_conn.set_fetchone_responses([fake_product])
+
+    # Parche del get_db correcto
+    monkeypatch.setattr(
+        "app.controllers.User.Catalogo.productoDet.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/producto/unico?id=5")
+
+    assert resp.status_code == 200
+    body = resp.get_json()
+
+    assert body["id_producto"] == 5
+    assert body["nombre"] == "Gaseosa Cola"
+    assert body["imagenes"] == ["img1.png", "img2.png"]
+
+def test_producto_unico_no_encontrado(monkeypatch, client, fake_conn):
+    # No se encontró, fetchone devuelve None
+    fake_conn.set_fetchone_responses([None])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Catalogo.productoDet.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/producto/unico?id=999")
+
+    assert resp.status_code == 404
+    body = resp.get_json()
+    assert "error" in body
+    assert body["error"] == "Producto no encontrado"
+
+def test_producto_unico_error_bd(monkeypatch, client):
+
+    class FakeBadConn:
+        def cursor(self):
+            raise Exception("Falla crítica")
+
+    monkeypatch.setattr(
+        "app.controllers.User.Catalogo.productoDet.get_db",
+        lambda: FakeBadConn()
+    )
+
+    resp = client.get("/api/producto/unico?id=5")
+
+    assert resp.status_code == 500
+    body = resp.get_json()
+    assert "error" in body
+    assert "Falla crítica" in body["error"]
diff --git a/HGW-Flask/tests/Educacion/test_educacion.py b/HGW-Flask/tests/Educacion/test_educacion.py
new file mode 100644
index 0000000..146c7f9
--- /dev/null
+++ b/HGW-Flask/tests/Educacion/test_educacion.py
@@ -0,0 +1,109 @@
+# -------------------- Tests GET /api/educacion --------------------
+
+def test_get_temas_ok(monkeypatch, client, fake_conn):
+    temas = [
+        {"id_tema": 1, "tema": "Matemáticas"},
+        {"id_tema": 2, "tema": "Historia"}
+    ]
+
+    fake_conn.set_fetchall_responses([temas])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Educacion.educacion.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/educacion")
+    assert resp.status_code == 200
+
+    body = resp.get_json()
+    assert isinstance(body, list)
+    assert len(body) == 2
+    assert body[0]["tema"] == "Matemáticas"
+
+
+def test_get_temas_error(monkeypatch, client):
+    def fake_get_db_error():
+        raise Exception("Error de conexión")
+
+    monkeypatch.setattr(
+        "app.controllers.User.Educacion.educacion.get_db",
+        fake_get_db_error
+    )
+
+    resp = client.get("/api/educacion")
+    assert resp.status_code == 500
+
+    body = resp.get_json()
+    assert "error" in body
+
+
+# -------------------- Tests GET /api/contenido_tema --------------------
+
+def test_get_contenidos_sin_filtro(monkeypatch, client, fake_conn):
+
+    contenidos = [
+        {
+            "id_contenido": 10,
+            "titulo": "Introducción",
+            "tema": 1,
+            "temaName": "Matemáticas"
+        }
+    ]
+
+    fake_conn.set_fetchall_responses([contenidos])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Educacion.educacion.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/contenido_tema")
+    assert resp.status_code == 200
+
+    body = resp.get_json()
+    assert isinstance(body, list)
+    assert len(body) == 1
+    assert body[0]["temaName"] == "Matemáticas"
+
+
+def test_get_contenidos_con_filtro(monkeypatch, client, fake_conn):
+
+    contenidos = [
+        {
+            "id_contenido": 5,
+            "titulo": "Fracciones",
+            "tema": 1,
+            "temaName": "Matemáticas"
+        }
+    ]
+
+    fake_conn.set_fetchall_responses([contenidos])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Educacion.educacion.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/contenido_tema?id_tema=1")
+    assert resp.status_code == 200
+
+    body = resp.get_json()
+    assert len(body) == 1
+    assert body[0]["titulo"] == "Fracciones"
+
+
+def test_get_contenidos_error(monkeypatch, client):
+    def fake_get_db_error():
+        raise Exception("Error de BD")
+
+    monkeypatch.setattr(
+        "app.controllers.User.Educacion.educacion.get_db",
+        fake_get_db_error
+    )
+
+    resp = client.get("/api/contenido_tema")
+    assert resp.status_code == 500
+
+    body = resp.get_json()
+    assert "error" in body
diff --git a/HGW-Flask/tests/InicioSesion/test_ciudades.py b/HGW-Flask/tests/InicioSesion/test_ciudades.py
new file mode 100644
index 0000000..a09fdd1
--- /dev/null
+++ b/HGW-Flask/tests/InicioSesion/test_ciudades.py
@@ -0,0 +1,53 @@
+import pytest
+
+def test_api_ubicacion_ciudades_todas(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchall_responses([
+        [
+            {"id_ubicacion": 10, "nombre": "Bogotá", "ubicacion_padre": 1},
+            {"id_ubicacion": 11, "nombre": "Medellín", "ubicacion_padre": 1}
+        ]
+    ])
+
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.register.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/ubicacion/ciudades")
+
+    assert resp.status_code == 200
+    assert resp.get_json()[0]["nombre"] == "Bogotá"
+
+
+def test_api_ubicacion_ciudades_por_pais(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchall_responses([
+        [
+            {"id_ubicacion": 22, "nombre": "Santiago", "ubicacion_padre": 5}
+        ]
+    ])
+
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.register.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/ubicacion/ciudades?paisId=5")
+
+    assert resp.status_code == 200
+    assert resp.get_json()[0]["ubicacion_padre"] == 5
+
+
+def test_api_ubicacion_ciudades_error(monkeypatch, client):
+    def fake_error():
+        raise Exception("DB caída")
+
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.register.get_db",
+        fake_error
+    )
+
+    resp = client.get("/api/ubicacion/ciudades")
+    assert resp.status_code == 500
+
+    body = resp.get_json()
+    assert "error" in body
\ No newline at end of file
diff --git a/HGW-Flask/tests/InicioSesion/test_login.py b/HGW-Flask/tests/InicioSesion/test_login.py
new file mode 100644
index 0000000..796bd8c
--- /dev/null
+++ b/HGW-Flask/tests/InicioSesion/test_login.py
@@ -0,0 +1,133 @@
+import pytest
+import jwt
+from datetime import datetime, timedelta
+
+# ============================
+# 1. NO ENVÍA JSON
+# ============================
+def test_login_sin_json(client):
+    resp = client.post("/api/login", data="no-json")
+    assert resp.status_code == 400
+    body = resp.get_json()
+    assert body["success"] is False
+
+# ============================
+# 2. FALTAN CAMPOS
+# ============================
+def test_login_faltan_campos(client):
+    resp = client.post("/api/login", json={"usuario": "correo"})
+    assert resp.status_code == 400
+    body = resp.get_json()
+    assert body["success"] is False
+
+# ============================
+# 3. USUARIO NO EXISTE
+# ============================
+def test_login_usuario_no_existe(monkeypatch, client, fake_conn):
+    # DB devuelve None -> no existe usuario
+    fake_conn.set_fetchone_responses([None])
+
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.login.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.post("/api/login", json={"usuario": "test", "contrasena": "123"})
+    assert resp.status_code == 401
+    assert resp.get_json()["success"] is False
+
+# ============================
+# 4. CONTRASEÑA INCORRECTA
+# ============================
+def test_login_contrasena_incorrecta(monkeypatch, client, fake_conn):
+    # Usuario encontrado PERO contraseña incorrecta
+    fake_conn.set_fetchone_responses([
+        {
+            "id": 1,
+            "nombre": "Fabian",
+            "apellido": "Amaya",
+            "nombre_usuario": "fabian",
+            "password": "$2b$12$xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
+            "correo_electronico": "fabian@test.com",
+            "numero_telefono": "123",
+            "url_foto_perfil": "",
+            "patrocinador": None,
+            "role_id": 3,
+            "nombre_medio": "Nequi"
+        }
+    ])
+
+    # Mock bcrypt.check_password_hash → devuelve False
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.login.bcrypt.check_password_hash",
+        lambda hash_, pwd: False
+    )
+
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.login.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.post("/api/login", json={"usuario": "fabian", "contrasena": "incorrecta"})
+    assert resp.status_code == 401
+    assert resp.get_json()["success"] is False
+
+# ============================
+# 5. LOGIN EXITOSO
+# ============================
+def test_login_exitoso(monkeypatch, client, fake_conn):
+
+    fake_user = {
+        "id": 2,
+        "nombre": "miguel",
+        "apellido": "amaya",
+        "nombre_usuario": "mf",
+        "password": "hash123",
+        "correo_electronico": "m@m.com",
+        "numero_telefono": "1234567890",
+        "url_foto_perfil": "images/Halloween.png",
+        "patrocinador": "Fabian_Amaya8",
+        "role_id": 1,
+        "nombre_medio": 1
+    }
+
+    fake_conn.set_fetchone_responses([fake_user])
+
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.login.bcrypt.check_password_hash",
+        lambda h, p: True
+    )
+
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.login.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.post("/api/login", json={"usuario": "mf", "contrasena": "123"})
+    assert resp.status_code == 200
+
+    body = resp.get_json()
+    assert body["success"] is True
+    assert "token" in body
+
+    assert body["redirect"] == "/Administrador"
+    assert body["usuario"]["id_usuario"] == 2
+    assert body["usuario"]["correo_electronico"] == "m@m.com"
+
+# ============================
+# 6. ERROR INTERNO
+# ============================
+def test_login_error_interno(monkeypatch, client):
+
+    class FakeBadConn:
+        def cursor(self):
+            raise Exception("BD caída")
+
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.login.get_db",
+        lambda: FakeBadConn()
+    )
+
+    resp = client.post("/api/login", json={"usuario": "a", "contrasena": "b"})
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
diff --git a/HGW-Flask/tests/InicioSesion/test_paises.py b/HGW-Flask/tests/InicioSesion/test_paises.py
new file mode 100644
index 0000000..f9da569
--- /dev/null
+++ b/HGW-Flask/tests/InicioSesion/test_paises.py
@@ -0,0 +1,60 @@
+import pytest
+from sqlalchemy import text
+
+def test_api_ubicacion_paises_exitoso(monkeypatch, client):
+
+    fake_rows = [
+        {"id_ubicacion": 1, "nombre": "Colombia"},
+        {"id_ubicacion": 2, "nombre": "México"}
+    ]
+
+    # === Fake row con atributo _mapping ===
+    class FakeRow:
+        def __init__(self, data):
+            self._mapping = data
+
+    # === Fake result iterable ===
+    class FakeResult:
+        def __iter__(self):
+            for r in fake_rows:
+                yield FakeRow(r)
+
+    # === Fake session con execute() y remove() ===
+    class FakeSession:
+        def execute(self, query):
+            return FakeResult()
+
+        def remove(self):
+            pass  # Flask-SQLAlchemy lo llamará
+
+    # Monkeypatch a db.session
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.register.db.session",
+        FakeSession()
+    )
+
+    resp = client.get("/api/ubicacion/paises")
+
+    assert resp.status_code == 200
+    assert resp.get_json() == fake_rows
+
+
+def test_api_ubicacion_paises_error(monkeypatch, client):
+
+    class FakeSession:
+        def execute(self, query):
+            raise Exception("DB caída")
+
+        def remove(self):
+            pass  # evitar error en teardown
+
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.register.db.session",
+        FakeSession()
+    )
+
+    resp = client.get("/api/ubicacion/paises")
+    body = resp.get_json()
+
+    assert resp.status_code == 500
+    assert body["error"] == "DB caída"
diff --git a/HGW-Flask/tests/InicioSesion/test_register.py b/HGW-Flask/tests/InicioSesion/test_register.py
new file mode 100644
index 0000000..f9f1d4c
--- /dev/null
+++ b/HGW-Flask/tests/InicioSesion/test_register.py
@@ -0,0 +1,98 @@
+import pytest
+
+def test_register_faltan_campos(client):
+    resp = client.post("/api/register", data={})
+    assert resp.status_code == 400
+    assert resp.get_json()["success"] is False
+
+
+def test_register_contrasenas_no_coinciden(client):
+    data = {
+        "nombres": "Fabian",
+        "apellido": "Amaya",
+        "usuario": "fabian",
+        "contrasena": "123",
+        "confirmar_contrasena": "456",
+        "correo": "f@f.com",
+        "telefono": "123",
+        "direccion": "Calle 1",
+        "codigo_postal": "110111",
+        "ciudad": "1",
+        "lugar_entrega": "casa"
+    }
+    resp = client.post("/api/register", data=data)
+    assert resp.status_code == 400
+
+
+def test_register_exitoso(monkeypatch, client, fake_conn):
+    data = {
+        "nombres": "Fabian",
+        "apellido": "Amaya",
+        "usuario": "fabian",
+        "contrasena": "123",
+        "confirmar_contrasena": "123",
+        "correo": "f@f.com",
+        "telefono": "123",
+        "direccion": "Calle 1",
+        "codigo_postal": "110111",
+        "ciudad": "1",
+        "lugar_entrega": "casa"
+    }
+
+    fake_conn.set_fetchone_responses([])
+    fake_conn.set_fetchall_responses([])
+
+    # Mock DB
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.register.get_db",
+        lambda: fake_conn
+    )
+
+    fake_conn.lastrowid = 10
+
+    # Mock bcrypt
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.register.bcrypt.generate_password_hash",
+        lambda pwd: b"hashed"
+    )
+
+    # Mock secure_filename
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.register.secure_filename",
+        lambda x: "foto.png"
+    )
+
+    resp = client.post("/api/register", data=data)
+
+    assert resp.status_code == 201
+    assert resp.get_json()["success"] is True
+    assert fake_conn.commit_count == 1
+
+
+def test_register_error(monkeypatch, client):
+    def fake_error():
+        raise Exception("DB caída")
+
+    monkeypatch.setattr(
+        "app.controllers.User.InicioSesion.register.get_db",
+        fake_error
+    )
+
+    data = {
+        "nombres": "Fabian",
+        "apellido": "Amaya",
+        "usuario": "fabian",
+        "contrasena": "123",
+        "confirmar_contrasena": "123",
+        "correo": "f@f.com",
+        "telefono": "123",
+        "direccion": "Calle 1",
+        "codigo_postal": "110111",
+        "ciudad": "1",
+        "lugar_entrega": "casa"
+    }
+
+    resp = client.post("/api/register", data=data)
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
diff --git a/HGW-Flask/tests/Personal/Header/test_header.py b/HGW-Flask/tests/Personal/Header/test_header.py
new file mode 100644
index 0000000..176f276
--- /dev/null
+++ b/HGW-Flask/tests/Personal/Header/test_header.py
@@ -0,0 +1,93 @@
+import pytest
+
+DIR = "app.controllers.User.Personal.Info_Header"
+
+# -------------------------------------------------------
+# 1. FALTA ID DE USUARIO
+# -------------------------------------------------------
+def test_header_sin_id(client):
+    resp = client.get("/api/header")
+    assert resp.status_code == 400
+
+    data = resp.get_json()
+    assert data["success"] is False
+    assert "ID de usuario" in data["message"]
+
+
+# -------------------------------------------------------
+# 2. USUARIO NO EXISTE
+# -------------------------------------------------------
+def test_header_usuario_no_existe(monkeypatch, client, fake_conn):
+    
+    # fetchone → None en consulta del usuario
+    fake_conn.set_fetchone_responses([
+        None
+    ])
+    fake_conn.set_fetchall_responses([])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/header?id=5")
+
+    assert resp.status_code == 404
+    assert resp.get_json()["message"] == "Usuario no encontrado"
+
+
+# -------------------------------------------------------
+# 3. USUARIO INACTIVO
+# -------------------------------------------------------
+def test_header_usuario_inactivo(monkeypatch, client, fake_conn):
+
+    fake_conn.set_fetchone_responses([
+        {"url_foto_perfil": "image.jpg", "activo": 0}
+    ])
+    fake_conn.set_fetchall_responses([])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/header?id=10")
+
+    assert resp.status_code == 403
+    assert "desactivada" in resp.get_json()["message"].lower()
+
+
+# -------------------------------------------------------
+# 4. HEADER EXITOSO (carrito suma correctamente)
+# -------------------------------------------------------
+def test_header_exitoso(monkeypatch, client, fake_conn):
+
+    # 1) Primero fetchone() trae la info del usuario
+    # 2) Segundo fetchone() trae el total del carrito
+    fake_conn.set_fetchone_responses([
+        {"url_foto_perfil": "foto.jpg", "activo": 1},   # usuario
+        {"total_carrito": 4}                            # carrito
+    ])
+    fake_conn.set_fetchall_responses([])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/header?id=1")
+
+    assert resp.status_code == 200
+    data = resp.get_json()
+
+    assert data["success"] is True
+    assert data["user"]["total_carrito"] == 4
+    assert data["user"]["url_foto_perfil"] == "foto.jpg"
+
+
+# -------------------------------------------------------
+# 5. ERROR INTERNO (Excepción en cursor)
+# -------------------------------------------------------
+def test_header_error(monkeypatch, client):
+
+    class FakeConn:
+        def cursor(self):
+            raise Exception("DB rota")
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: FakeConn())
+
+    resp = client.get("/api/header?id=1")
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
diff --git a/HGW-Flask/tests/Personal/InfoPersonal/Direcciones/test_crear_direccion.py b/HGW-Flask/tests/Personal/InfoPersonal/Direcciones/test_crear_direccion.py
new file mode 100644
index 0000000..663f4b6
--- /dev/null
+++ b/HGW-Flask/tests/Personal/InfoPersonal/Direcciones/test_crear_direccion.py
@@ -0,0 +1,71 @@
+import pytest
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_crear_direccion_exitoso(monkeypatch, client, fake_conn):
+    data = {
+        "id_usuario": 1,
+        "lugar_entrega": "Casa",
+        "direccion": "Calle 10",
+        "ciudad": "Bogotá",
+        "pais": "Colombia",
+        "codigo_postal": "110111"
+    }
+
+    # Respuesta del SELECT de ubicaciones
+    fake_conn.set_fetchone_responses([
+        {"id_ubicacion": 99}
+    ])
+
+    # Mock DB
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    fake_conn.lastrowid = 123  # para el INSERT
+
+    resp = client.post("/api/direcciones/crear", json=data)
+
+    assert resp.status_code == 201
+    json_data = resp.get_json()
+    assert json_data["success"] is True
+    assert json_data["id_direccion"] == 123
+    assert fake_conn.commit_count == 1
+
+
+def test_crear_direccion_ciudad_invalida(monkeypatch, client, fake_conn):
+    data = {
+        "id_usuario": 1,
+        "lugar_entrega": "Casa",
+        "direccion": "Calle 10",
+        "ciudad": "X",
+        "pais": "Y",
+        "codigo_postal": "110111"
+    }
+
+    fake_conn.set_fetchone_responses([None])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.post("/api/direcciones/crear", json=data)
+    assert resp.status_code == 400
+    assert resp.get_json()["success"] is False
+
+
+def test_crear_direccion_error_db(monkeypatch, client):
+    def fake_error():
+        raise Exception("DB caída")
+
+    monkeypatch.setattr(f"{DIR}.get_db", fake_error)
+
+    data = {
+        "id_usuario": 1,
+        "lugar_entrega": "Casa",
+        "direccion": "Calle 10",
+        "ciudad": "Bogotá",
+        "pais": "Colombia",
+        "codigo_postal": "110111"
+    }
+
+    resp = client.post("/api/direcciones/crear", json=data)
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
diff --git a/HGW-Flask/tests/Personal/InfoPersonal/Direcciones/test_eliminar_direccion.py b/HGW-Flask/tests/Personal/InfoPersonal/Direcciones/test_eliminar_direccion.py
new file mode 100644
index 0000000..c6cc678
--- /dev/null
+++ b/HGW-Flask/tests/Personal/InfoPersonal/Direcciones/test_eliminar_direccion.py
@@ -0,0 +1,50 @@
+import pytest
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_eliminar_direccion_exitoso(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([
+        {"id_direccion": 5}  # la dirección existe
+    ])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    data = {"id_direccion": 5, "id_usuario": 1}
+
+    resp = client.delete("/api/direcciones/eliminar", json=data)
+
+    assert resp.status_code == 200
+    assert resp.get_json()["success"] is True
+    assert fake_conn.commit_count == 1
+
+
+def test_eliminar_direccion_no_encontrada(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([None])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    data = {"id_direccion": 5, "id_usuario": 1}
+
+    resp = client.delete("/api/direcciones/eliminar", json=data)
+
+    assert resp.status_code == 404
+    assert resp.get_json()["success"] is False
+
+
+def test_eliminar_direccion_datos_incompletos(client):
+    resp = client.delete("/api/direcciones/eliminar", json={})
+    assert resp.status_code == 400
+
+
+def test_eliminar_direccion_error(monkeypatch, client):
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    data = {"id_direccion": 5, "id_usuario": 1}
+
+    resp = client.delete("/api/direcciones/eliminar", json=data)
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
diff --git a/HGW-Flask/tests/Personal/InfoPersonal/Direcciones/test_get_direcciones.py b/HGW-Flask/tests/Personal/InfoPersonal/Direcciones/test_get_direcciones.py
new file mode 100644
index 0000000..82973cf
--- /dev/null
+++ b/HGW-Flask/tests/Personal/InfoPersonal/Direcciones/test_get_direcciones.py
@@ -0,0 +1,43 @@
+import pytest
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_get_direcciones_exitoso(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchall_responses([
+        [
+            {
+                "id": 1,
+                "direccion": "Calle 10",
+                "codigo_postal": "110111",
+                "lugar_entrega": "Casa",
+                "ciudad": "Bogotá",
+                "pais": "Colombia"
+            }
+        ]
+    ])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/direcciones?id=1")
+
+    assert resp.status_code == 200
+    json_data = resp.get_json()
+    assert json_data["success"] is True
+    assert len(json_data["direcciones"]) == 1
+
+
+def test_get_direcciones_sin_id(client):
+    resp = client.get("/api/direcciones")
+    assert resp.status_code == 400
+
+
+def test_get_direcciones_error(monkeypatch, client):
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    resp = client.get("/api/direcciones?id=1")
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
diff --git a/HGW-Flask/tests/Personal/InfoPersonal/Info/test_cambiar_contrasena.py b/HGW-Flask/tests/Personal/InfoPersonal/Info/test_cambiar_contrasena.py
new file mode 100644
index 0000000..0e47e2d
--- /dev/null
+++ b/HGW-Flask/tests/Personal/InfoPersonal/Info/test_cambiar_contrasena.py
@@ -0,0 +1,65 @@
+import pytest
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_cambiar_contrasena_incompleto(client):
+    resp = client.post("/api/cambiar-contrasena", json={})
+    assert resp.status_code == 400
+
+
+def test_cambiar_contrasena_usuario_no_existe(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([None])
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    data = {"id_usuario": 1, "actual": "123", "nueva": "456"}
+    resp = client.post("/api/cambiar-contrasena", json=data)
+
+    assert resp.status_code == 404
+
+
+def test_cambiar_contrasena_incorrecta(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([{"pss": "hashed_pass"}])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    monkeypatch.setattr(
+        f"{DIR}.bcrypt.check_password_hash",
+        lambda stored, given: False
+    )
+
+    data = {"id_usuario": 1, "actual": "wrong", "nueva": "456"}
+    resp = client.post("/api/cambiar-contrasena", json=data)
+
+    assert resp.status_code == 401
+
+
+def test_cambiar_contrasena_exitoso(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([{"pss": "hashed"}])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    monkeypatch.setattr(
+        f"{DIR}.bcrypt.check_password_hash",
+        lambda stored, given: True
+    )
+
+    monkeypatch.setattr(
+        f"{DIR}.bcrypt.generate_password_hash",
+        lambda pwd: b"new_hashed"
+    )
+
+    data = {"id_usuario": 1, "actual": "123", "nueva": "456"}
+    resp = client.post("/api/cambiar-contrasena", json=data)
+
+    assert resp.status_code == 200
+    assert fake_conn.commit_count == 1
+
+
+def test_cambiar_contrasena_error(monkeypatch, client):
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    resp = client.post("/api/cambiar-contrasena", json={"id_usuario": 1, "actual": "x", "nueva": "y"})
+    assert resp.status_code == 500
diff --git a/HGW-Flask/tests/Personal/InfoPersonal/Info/test_delete_foto_perfil.py b/HGW-Flask/tests/Personal/InfoPersonal/Info/test_delete_foto_perfil.py
new file mode 100644
index 0000000..666cc2f
--- /dev/null
+++ b/HGW-Flask/tests/Personal/InfoPersonal/Info/test_delete_foto_perfil.py
@@ -0,0 +1,57 @@
+import pytest
+import os
+
+DIR = "app.controllers.User.Personal.personal"
+
+
+def test_delete_foto_sin_id(client):
+    resp = client.delete("/api/personal/delete")
+    assert resp.status_code == 400
+
+
+def test_delete_foto_no_existe(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([None])
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.delete("/api/personal/delete?id=1")
+
+    assert resp.status_code == 404
+
+
+def test_delete_foto_exitoso(monkeypatch, client, fake_conn, tmp_path):
+    # Mock DB
+    fake_conn.set_fetchone_responses([
+        {"url_foto_perfil": "static/uploads/profile_pictures/foto.png"}
+    ])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    # Crear archivo simulado
+    fake_file = tmp_path / "foto.png"
+    fake_file.write_text("demo")
+
+    # Mock ruta absoluta
+    monkeypatch.setattr(
+        f"{DIR}.os.path.exists",
+        lambda path: True
+    )
+    monkeypatch.setattr(
+        f"{DIR}.os.remove",
+        lambda path: None
+    )
+
+    resp = client.delete("/api/personal/delete?id=1")
+
+    assert resp.status_code == 200
+    assert resp.get_json()["success"] is True
+
+
+def test_delete_foto_error(monkeypatch, client):
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    resp = client.delete("/api/personal/delete?id=1")
+
+    assert resp.status_code == 500
diff --git a/HGW-Flask/tests/Personal/InfoPersonal/Info/test_get_personal.py b/HGW-Flask/tests/Personal/InfoPersonal/Info/test_get_personal.py
new file mode 100644
index 0000000..fbb2262
--- /dev/null
+++ b/HGW-Flask/tests/Personal/InfoPersonal/Info/test_get_personal.py
@@ -0,0 +1,92 @@
+import pytest
+from decimal import Decimal
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_get_personal_exitoso(monkeypatch, client, fake_conn):
+    # 1) SELECT usuario
+    fake_conn.set_fetchone_responses([
+        {
+            "id_usuario": 1,
+            "nombre": "Fabian",
+            "apellido": "Amaya",
+            "nombre_usuario": "fabian",
+            "pss": "hashed",
+            "correo_electronico": "f@f.com",
+            "numero_telefono": "123",
+            "url_foto_perfil": None,
+            "patrocinador": None,
+            "bv_acumulados": Decimal("100"),
+            "nombre_medio": "Nequi"
+        },
+        # 3) SELECT membresía
+        {
+            "membresia": 1,
+            "nombre_membresia": "Bronce",
+            "bv_requeridos": Decimal("200"),
+            "precio_membresia": Decimal("50000"),
+            "bv_acumulados": Decimal("100"),
+            "proxima_membresia": "Plata"
+        }
+    ])
+
+    # 2) fetchall → direcciones
+    fake_conn.set_fetchall_responses([
+        [  # Direcciones
+            {
+                "id_direccion": 1,
+                "direccion": "Calle 10",
+                "codigo_postal": "110111",
+                "lugar_entrega": "Casa",
+                "ciudad_id": 10,
+                "pais_id": 20,
+                "ciudad": "Bogotá",
+                "pais": "Colombia"
+            }
+        ],
+        [  # historial BV
+            {
+                "bv_ganados": 10,
+                "fecha_transaccion": "2024-10-01",
+                "descripcion": "Compra"
+            }
+        ]
+    ])
+
+    # Mock DB
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/personal?id=1")
+
+    assert resp.status_code == 200
+    json_data = resp.get_json()
+    assert json_data["success"] is True
+    assert json_data["usuario"]["nombre"] == "Fabian"
+    assert len(json_data["usuario"]["direcciones"]) == 1
+
+
+def test_get_personal_sin_id(client):
+    resp = client.get("/api/personal")
+    assert resp.status_code == 400
+
+
+def test_get_personal_no_existe(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([None])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/personal?id=99")
+
+    assert resp.status_code == 404
+
+
+def test_get_personal_error(monkeypatch, client):
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    resp = client.get("/api/personal?id=1")
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
diff --git a/HGW-Flask/tests/Personal/InfoPersonal/Info/test_update_personal.py b/HGW-Flask/tests/Personal/InfoPersonal/Info/test_update_personal.py
new file mode 100644
index 0000000..6797a24
--- /dev/null
+++ b/HGW-Flask/tests/Personal/InfoPersonal/Info/test_update_personal.py
@@ -0,0 +1,63 @@
+import pytest
+import json
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_update_personal_json_exitoso(monkeypatch, client, fake_conn):
+    data = {
+        "nombre": "Fabian Nuevo",
+        "apellido": "Amaya",
+        "direcciones": [
+            {
+                "id_direccion": 1,
+                "direccion": "Nueva Calle",
+                "codigo_postal": "99999"
+            }
+        ]
+    }
+
+    fake_conn.set_fetchone_responses([{"id_usuario": 1}])
+    fake_conn.set_fetchall_responses([])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.put(
+        "/api/personal/update?id=1",
+        data=json.dumps(data),
+        content_type="application/json"
+    )
+
+    assert resp.status_code == 200
+    assert resp.get_json()["success"] is True
+    assert fake_conn.commit_count == 1
+
+
+def test_update_personal_sin_id(client):
+    resp = client.put("/api/personal/update")
+    assert resp.status_code == 400
+
+
+def test_update_personal_usuario_no_existe(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([None])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    # simulamos foto (multipart)
+    resp = client.put(
+        "/api/personal/update?id=1",
+        data={"data": "{}"},
+        content_type="multipart/form-data"
+    )
+
+    assert resp.status_code == 404
+
+
+def test_update_personal_error(monkeypatch, client):
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    resp = client.put("/api/personal/update?id=1")
+
+    assert resp.status_code == 500
diff --git a/HGW-Flask/tests/Personal/InfoPersonal/Ubicaciones/test_get_ubicaciones.py b/HGW-Flask/tests/Personal/InfoPersonal/Ubicaciones/test_get_ubicaciones.py
new file mode 100644
index 0000000..81aa86b
--- /dev/null
+++ b/HGW-Flask/tests/Personal/InfoPersonal/Ubicaciones/test_get_ubicaciones.py
@@ -0,0 +1,79 @@
+import pytest
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_get_ubicaciones_exitoso(monkeypatch, client, fake_conn):
+    """
+    Caso exitoso: debe retornar países y sus ciudades.
+    """
+
+    # Respuestas simuladas:
+    # Primera consulta → países
+    # Las siguientes consultas → ciudades de cada país
+    fake_conn.set_fetchall_responses([
+        [  # países
+            {"id_ubicacion": 1, "nombre": "Colombia"},
+            {"id_ubicacion": 2, "nombre": "México"}
+        ],
+        [  # ciudades de Colombia
+            {"id_ubicacion": 10, "nombre": "Bogotá"},
+            {"id_ubicacion": 11, "nombre": "Medellín"}
+        ],
+        [  # ciudades de México
+            {"id_ubicacion": 20, "nombre": "CDMX"},
+            {"id_ubicacion": 21, "nombre": "Guadalajara"}
+        ]
+    ])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/ubicaciones")
+    assert resp.status_code == 200
+
+    data = resp.get_json()
+    assert data["success"] is True
+
+    ubic = data["ubicaciones"]
+
+    assert "Colombia" in ubic
+    assert "México" in ubic
+    assert ubic["Colombia"] == ["Bogotá", "Medellín"]
+    assert ubic["México"] == ["CDMX", "Guadalajara"]
+
+
+def test_get_ubicaciones_sin_ciudades(monkeypatch, client, fake_conn):
+    """
+    Caso donde el país existe pero no tiene ciudades asociadas.
+    """
+
+    fake_conn.set_fetchall_responses([
+        [  # países
+            {"id_ubicacion": 1, "nombre": "Colombia"}
+        ],
+        [  # ciudades vacías
+        ]
+    ])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/ubicaciones")
+    assert resp.status_code == 200
+
+    data = resp.get_json()
+    assert data["ubicaciones"]["Colombia"] == []
+
+
+def test_get_ubicaciones_error(monkeypatch, client):
+    """
+    Error en base de datos.
+    """
+
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    resp = client.get("/api/ubicaciones")
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
diff --git a/HGW-Flask/tests/Personal/Membresia/test_obtener_membresia.py b/HGW-Flask/tests/Personal/Membresia/test_obtener_membresia.py
new file mode 100644
index 0000000..7f20044
--- /dev/null
+++ b/HGW-Flask/tests/Personal/Membresia/test_obtener_membresia.py
@@ -0,0 +1,67 @@
+import pytest
+from decimal import Decimal
+
+# ================================
+# GET /api/membresia?id=#
+# ================================
+
+def test_obtener_membresia_sin_id(client):
+    resp = client.get("/api/membresia")  
+    assert resp.status_code == 400
+    assert resp.get_json()["success"] is False
+
+
+def test_obtener_membresia_no_existe(monkeypatch, client, fake_conn):
+
+    fake_conn.set_fetchone_responses([None])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Personal.membresia.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/membresia?id=5")
+    assert resp.status_code == 404
+    assert resp.get_json()["success"] is False
+
+
+def test_obtener_membresia_exitoso(monkeypatch, client, fake_conn):
+
+    fake_conn.set_fetchone_responses([
+        {
+            "id_membresia": 1,
+            "nombre_membresia": "Bronce",
+            "precio_membresia": Decimal("20.5"),
+            "bv_requeridos": Decimal("100.0"),
+            "bv_acumulados": Decimal("50.0"),
+            "proxima_membresia": "Plata"
+        }
+    ])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Personal.membresia.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/membresia?id=1")
+    body = resp.get_json()
+
+    assert resp.status_code == 200
+    assert body["success"] is True
+    assert body["membresia"]["nombre_membresia"] == "Bronce"
+    assert isinstance(body["membresia"]["precio_membresia"], float)
+
+
+def test_obtener_membresia_error(monkeypatch, client):
+
+    def fake_error():
+        raise Exception("DB caída")
+
+    monkeypatch.setattr(
+        "app.controllers.User.Personal.membresia.get_db",
+        fake_error
+    )
+
+    resp = client.get("/api/membresia?id=1")
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
diff --git a/HGW-Flask/tests/Personal/Membresia/test_obtener_todas_membresias.py b/HGW-Flask/tests/Personal/Membresia/test_obtener_todas_membresias.py
new file mode 100644
index 0000000..c298de0
--- /dev/null
+++ b/HGW-Flask/tests/Personal/Membresia/test_obtener_todas_membresias.py
@@ -0,0 +1,53 @@
+import pytest
+from decimal import Decimal
+
+# ================================
+# GET /api/membresias
+# ================================
+
+def test_obtener_todas_membresias_exitoso(monkeypatch, client, fake_conn):
+
+    fake_conn.set_fetchall_responses([
+        [
+            {
+                "id_membresia": 1,
+                "nombre_membresia": "Bronce",
+                "precio_membresia": Decimal("19.99"),
+                "bv": Decimal("50")
+            },
+            {
+                "id_membresia": 2,
+                "nombre_membresia": "Plata",
+                "precio_membresia": Decimal("39.99"),
+                "bv": Decimal("120")
+            }
+        ]
+    ])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Personal.membresia.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/membresias")
+    body = resp.get_json()
+
+    assert resp.status_code == 200
+    assert body["success"] is True
+    assert isinstance(body["membresias"], list)
+    assert isinstance(body["membresias"][0]["precio_membresia"], float)
+
+
+def test_obtener_todas_membresias_error(monkeypatch, client):
+
+    def fake_error():
+        raise Exception("DB caída")
+
+    monkeypatch.setattr(
+        "app.controllers.User.Personal.membresia.get_db",
+        fake_error
+    )
+
+    resp = client.get("/api/membresias")
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
diff --git a/HGW-Flask/tests/Personal/Red/test_mi_red.py b/HGW-Flask/tests/Personal/Red/test_mi_red.py
new file mode 100644
index 0000000..483d669
--- /dev/null
+++ b/HGW-Flask/tests/Personal/Red/test_mi_red.py
@@ -0,0 +1,104 @@
+import pytest
+
+DIR = "app.controllers.User.Personal.red_multinivel"
+
+# -------------------------------------------------------
+# 1. FALTA ID DE USUARIO
+# -------------------------------------------------------
+def test_obtener_mi_red_sin_id(client):
+    resp = client.get("/api/mi-red")
+    assert resp.status_code == 400
+    assert resp.get_json()["success"] is False
+
+
+# -------------------------------------------------------
+# 2. ERROR EN CONEXIÓN MYSQL (connection = None)
+# -------------------------------------------------------
+def test_obtener_mi_red_sin_conexion(monkeypatch, client):
+    monkeypatch.setattr(f"{DIR}.get_connection", lambda: None)
+
+    resp = client.get("/api/mi-red?id=1")
+    assert resp.status_code == 500
+
+    data = resp.get_json()
+    assert data["success"] is False
+    assert "conexión" in data["message"].lower()
+
+
+# -------------------------------------------------------
+# 3. USUARIO NO EXISTE
+# -------------------------------------------------------
+def test_obtener_mi_red_usuario_no_existe(monkeypatch, client, fake_conn):
+
+    # No retorna usuario
+    fake_conn.set_fetchone_responses([None])
+    fake_conn.set_fetchall_responses([])
+
+    monkeypatch.setattr(f"{DIR}.get_connection", lambda: fake_conn)
+
+    resp = client.get("/api/mi-red?id=99")
+
+    assert resp.status_code == 404
+    assert resp.get_json()["message"] == "Usuario no encontrado"
+
+
+# -------------------------------------------------------
+# 4. RED EXITOSA (devuelve descendientes)
+# -------------------------------------------------------
+def test_obtener_mi_red_exitoso(monkeypatch, client, fake_conn):
+
+    # 1) fetchone() → usuario encontrado
+    # 2) fetchall() → lista de la red
+    fake_conn.set_fetchone_responses([
+        {"nombre_usuario": "fabian"},  # usuario principal
+    ])
+
+    fake_conn.set_fetchall_responses([
+        [   # red multinivel
+            {
+                "id_usuario": 2,
+                "nombre": "Juan",
+                "apellido": "Pérez",
+                "nombre_usuario": "juan",
+                "correo_electronico": "j@j.com",
+                "url_foto_perfil": None,
+                "patrocinador": "fabian",
+                "nombre_membresia": "Bronce",
+                "fecha_registro": "2024-01-01 10:00:00",
+                "nivel": 1,
+                "activo": 1,
+                "numero_telefono": "123",
+                "total_red": 3,
+                "puntos_bv": 10
+            }
+        ]
+    ])
+
+    monkeypatch.setattr(f"{DIR}.get_connection", lambda: fake_conn)
+
+    resp = client.get("/api/mi-red?id=1")
+
+    assert resp.status_code == 200
+    body = resp.get_json()
+
+    assert body["success"] is True
+    assert body["total"] == 1
+    assert body["codigo_patrocinador"] == "fabian"
+    assert body["red"][0]["nombre_usuario"] == "juan"
+
+
+# -------------------------------------------------------
+# 5. ERROR INTERNO EN CONSULTA
+# -------------------------------------------------------
+def test_obtener_mi_red_error(monkeypatch, client):
+
+    class FakeConn:
+        def cursor(self):
+            raise Exception("DB caída")
+
+    monkeypatch.setattr(f"{DIR}.get_connection", lambda: FakeConn())
+
+    resp = client.get("/api/mi-red?id=1")
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
diff --git a/HGW-Flask/tests/Personal/codigo_completo.txt b/HGW-Flask/tests/Personal/codigo_completo.txt
new file mode 100644
index 0000000..d585b06
--- /dev/null
+++ b/HGW-Flask/tests/Personal/codigo_completo.txt
@@ -0,0 +1,861 @@
+===== F:\HGW-Sena\HGW-Flask\tests\Personal\Header\test_header.py ===== 
+import pytest
+
+DIR = "app.controllers.User.Personal.Info_Header"
+
+# -------------------------------------------------------
+# 1. FALTA ID DE USUARIO
+# -------------------------------------------------------
+def test_header_sin_id(client):
+    resp = client.get("/api/header")
+    assert resp.status_code == 400
+
+    data = resp.get_json()
+    assert data["success"] is False
+    assert "ID de usuario" in data["message"]
+
+
+# -------------------------------------------------------
+# 2. USUARIO NO EXISTE
+# -------------------------------------------------------
+def test_header_usuario_no_existe(monkeypatch, client, fake_conn):
+    
+    # fetchone → None en consulta del usuario
+    fake_conn.set_fetchone_responses([
+        None
+    ])
+    fake_conn.set_fetchall_responses([])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/header?id=5")
+
+    assert resp.status_code == 404
+    assert resp.get_json()["message"] == "Usuario no encontrado"
+
+
+# -------------------------------------------------------
+# 3. USUARIO INACTIVO
+# -------------------------------------------------------
+def test_header_usuario_inactivo(monkeypatch, client, fake_conn):
+
+    fake_conn.set_fetchone_responses([
+        {"url_foto_perfil": "image.jpg", "activo": 0}
+    ])
+    fake_conn.set_fetchall_responses([])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/header?id=10")
+
+    assert resp.status_code == 403
+    assert "desactivada" in resp.get_json()["message"].lower()
+
+
+# -------------------------------------------------------
+# 4. HEADER EXITOSO (carrito suma correctamente)
+# -------------------------------------------------------
+def test_header_exitoso(monkeypatch, client, fake_conn):
+
+    # 1) Primero fetchone() trae la info del usuario
+    # 2) Segundo fetchone() trae el total del carrito
+    fake_conn.set_fetchone_responses([
+        {"url_foto_perfil": "foto.jpg", "activo": 1},   # usuario
+        {"total_carrito": 4}                            # carrito
+    ])
+    fake_conn.set_fetchall_responses([])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/header?id=1")
+
+    assert resp.status_code == 200
+    data = resp.get_json()
+
+    assert data["success"] is True
+    assert data["user"]["total_carrito"] == 4
+    assert data["user"]["url_foto_perfil"] == "foto.jpg"
+
+
+# -------------------------------------------------------
+# 5. ERROR INTERNO (Excepción en cursor)
+# -------------------------------------------------------
+def test_header_error(monkeypatch, client):
+
+    class FakeConn:
+        def cursor(self):
+            raise Exception("DB rota")
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: FakeConn())
+
+    resp = client.get("/api/header?id=1")
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
+ 
+===== F:\HGW-Sena\HGW-Flask\tests\Personal\InfoPersonal\Direcciones\test_crear_direccion.py ===== 
+import pytest
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_crear_direccion_exitoso(monkeypatch, client, fake_conn):
+    data = {
+        "id_usuario": 1,
+        "lugar_entrega": "Casa",
+        "direccion": "Calle 10",
+        "ciudad": "Bogotá",
+        "pais": "Colombia",
+        "codigo_postal": "110111"
+    }
+
+    # Respuesta del SELECT de ubicaciones
+    fake_conn.set_fetchone_responses([
+        {"id_ubicacion": 99}
+    ])
+
+    # Mock DB
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    fake_conn.lastrowid = 123  # para el INSERT
+
+    resp = client.post("/api/direcciones/crear", json=data)
+
+    assert resp.status_code == 201
+    json_data = resp.get_json()
+    assert json_data["success"] is True
+    assert json_data["id_direccion"] == 123
+    assert fake_conn.commit_count == 1
+
+
+def test_crear_direccion_ciudad_invalida(monkeypatch, client, fake_conn):
+    data = {
+        "id_usuario": 1,
+        "lugar_entrega": "Casa",
+        "direccion": "Calle 10",
+        "ciudad": "X",
+        "pais": "Y",
+        "codigo_postal": "110111"
+    }
+
+    fake_conn.set_fetchone_responses([None])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.post("/api/direcciones/crear", json=data)
+    assert resp.status_code == 400
+    assert resp.get_json()["success"] is False
+
+
+def test_crear_direccion_error_db(monkeypatch, client):
+    def fake_error():
+        raise Exception("DB caída")
+
+    monkeypatch.setattr(f"{DIR}.get_db", fake_error)
+
+    data = {
+        "id_usuario": 1,
+        "lugar_entrega": "Casa",
+        "direccion": "Calle 10",
+        "ciudad": "Bogotá",
+        "pais": "Colombia",
+        "codigo_postal": "110111"
+    }
+
+    resp = client.post("/api/direcciones/crear", json=data)
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
+ 
+===== F:\HGW-Sena\HGW-Flask\tests\Personal\InfoPersonal\Direcciones\test_eliminar_direccion.py ===== 
+import pytest
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_eliminar_direccion_exitoso(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([
+        {"id_direccion": 5}  # la dirección existe
+    ])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    data = {"id_direccion": 5, "id_usuario": 1}
+
+    resp = client.delete("/api/direcciones/eliminar", json=data)
+
+    assert resp.status_code == 200
+    assert resp.get_json()["success"] is True
+    assert fake_conn.commit_count == 1
+
+
+def test_eliminar_direccion_no_encontrada(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([None])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    data = {"id_direccion": 5, "id_usuario": 1}
+
+    resp = client.delete("/api/direcciones/eliminar", json=data)
+
+    assert resp.status_code == 404
+    assert resp.get_json()["success"] is False
+
+
+def test_eliminar_direccion_datos_incompletos(client):
+    resp = client.delete("/api/direcciones/eliminar", json={})
+    assert resp.status_code == 400
+
+
+def test_eliminar_direccion_error(monkeypatch, client):
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    data = {"id_direccion": 5, "id_usuario": 1}
+
+    resp = client.delete("/api/direcciones/eliminar", json=data)
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
+ 
+===== F:\HGW-Sena\HGW-Flask\tests\Personal\InfoPersonal\Direcciones\test_get_direcciones.py ===== 
+import pytest
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_get_direcciones_exitoso(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchall_responses([
+        [
+            {
+                "id": 1,
+                "direccion": "Calle 10",
+                "codigo_postal": "110111",
+                "lugar_entrega": "Casa",
+                "ciudad": "Bogotá",
+                "pais": "Colombia"
+            }
+        ]
+    ])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/direcciones?id=1")
+
+    assert resp.status_code == 200
+    json_data = resp.get_json()
+    assert json_data["success"] is True
+    assert len(json_data["direcciones"]) == 1
+
+
+def test_get_direcciones_sin_id(client):
+    resp = client.get("/api/direcciones")
+    assert resp.status_code == 400
+
+
+def test_get_direcciones_error(monkeypatch, client):
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    resp = client.get("/api/direcciones?id=1")
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
+ 
+===== F:\HGW-Sena\HGW-Flask\tests\Personal\InfoPersonal\Info\test_cambiar_contrasena.py ===== 
+import pytest
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_cambiar_contrasena_incompleto(client):
+    resp = client.post("/api/cambiar-contrasena", json={})
+    assert resp.status_code == 400
+
+
+def test_cambiar_contrasena_usuario_no_existe(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([None])
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    data = {"id_usuario": 1, "actual": "123", "nueva": "456"}
+    resp = client.post("/api/cambiar-contrasena", json=data)
+
+    assert resp.status_code == 404
+
+
+def test_cambiar_contrasena_incorrecta(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([{"pss": "hashed_pass"}])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    monkeypatch.setattr(
+        f"{DIR}.bcrypt.check_password_hash",
+        lambda stored, given: False
+    )
+
+    data = {"id_usuario": 1, "actual": "wrong", "nueva": "456"}
+    resp = client.post("/api/cambiar-contrasena", json=data)
+
+    assert resp.status_code == 401
+
+
+def test_cambiar_contrasena_exitoso(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([{"pss": "hashed"}])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    monkeypatch.setattr(
+        f"{DIR}.bcrypt.check_password_hash",
+        lambda stored, given: True
+    )
+
+    monkeypatch.setattr(
+        f"{DIR}.bcrypt.generate_password_hash",
+        lambda pwd: b"new_hashed"
+    )
+
+    data = {"id_usuario": 1, "actual": "123", "nueva": "456"}
+    resp = client.post("/api/cambiar-contrasena", json=data)
+
+    assert resp.status_code == 200
+    assert fake_conn.commit_count == 1
+
+
+def test_cambiar_contrasena_error(monkeypatch, client):
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    resp = client.post("/api/cambiar-contrasena", json={"id_usuario": 1, "actual": "x", "nueva": "y"})
+    assert resp.status_code == 500
+ 
+===== F:\HGW-Sena\HGW-Flask\tests\Personal\InfoPersonal\Info\test_delete_foto_perfil.py ===== 
+import pytest
+import os
+
+DIR = "app.controllers.User.Personal.personal"
+
+
+def test_delete_foto_sin_id(client):
+    resp = client.delete("/api/personal/delete")
+    assert resp.status_code == 400
+
+
+def test_delete_foto_no_existe(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([None])
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.delete("/api/personal/delete?id=1")
+
+    assert resp.status_code == 404
+
+
+def test_delete_foto_exitoso(monkeypatch, client, fake_conn, tmp_path):
+    # Mock DB
+    fake_conn.set_fetchone_responses([
+        {"url_foto_perfil": "static/uploads/profile_pictures/foto.png"}
+    ])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    # Crear archivo simulado
+    fake_file = tmp_path / "foto.png"
+    fake_file.write_text("demo")
+
+    # Mock ruta absoluta
+    monkeypatch.setattr(
+        f"{DIR}.os.path.exists",
+        lambda path: True
+    )
+    monkeypatch.setattr(
+        f"{DIR}.os.remove",
+        lambda path: None
+    )
+
+    resp = client.delete("/api/personal/delete?id=1")
+
+    assert resp.status_code == 200
+    assert resp.get_json()["success"] is True
+
+
+def test_delete_foto_error(monkeypatch, client):
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    resp = client.delete("/api/personal/delete?id=1")
+
+    assert resp.status_code == 500
+ 
+===== F:\HGW-Sena\HGW-Flask\tests\Personal\InfoPersonal\Info\test_get_personal.py ===== 
+import pytest
+from decimal import Decimal
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_get_personal_exitoso(monkeypatch, client, fake_conn):
+    # 1) SELECT usuario
+    fake_conn.set_fetchone_responses([
+        {
+            "id_usuario": 1,
+            "nombre": "Fabian",
+            "apellido": "Amaya",
+            "nombre_usuario": "fabian",
+            "pss": "hashed",
+            "correo_electronico": "f@f.com",
+            "numero_telefono": "123",
+            "url_foto_perfil": None,
+            "patrocinador": None,
+            "bv_acumulados": Decimal("100"),
+            "nombre_medio": "Nequi"
+        },
+        # 3) SELECT membresía
+        {
+            "membresia": 1,
+            "nombre_membresia": "Bronce",
+            "bv_requeridos": Decimal("200"),
+            "precio_membresia": Decimal("50000"),
+            "bv_acumulados": Decimal("100"),
+            "proxima_membresia": "Plata"
+        }
+    ])
+
+    # 2) fetchall → direcciones
+    fake_conn.set_fetchall_responses([
+        [  # Direcciones
+            {
+                "id_direccion": 1,
+                "direccion": "Calle 10",
+                "codigo_postal": "110111",
+                "lugar_entrega": "Casa",
+                "ciudad_id": 10,
+                "pais_id": 20,
+                "ciudad": "Bogotá",
+                "pais": "Colombia"
+            }
+        ],
+        [  # historial BV
+            {
+                "bv_ganados": 10,
+                "fecha_transaccion": "2024-10-01",
+                "descripcion": "Compra"
+            }
+        ]
+    ])
+
+    # Mock DB
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/personal?id=1")
+
+    assert resp.status_code == 200
+    json_data = resp.get_json()
+    assert json_data["success"] is True
+    assert json_data["usuario"]["nombre"] == "Fabian"
+    assert len(json_data["usuario"]["direcciones"]) == 1
+
+
+def test_get_personal_sin_id(client):
+    resp = client.get("/api/personal")
+    assert resp.status_code == 400
+
+
+def test_get_personal_no_existe(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([None])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/personal?id=99")
+
+    assert resp.status_code == 404
+
+
+def test_get_personal_error(monkeypatch, client):
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    resp = client.get("/api/personal?id=1")
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
+ 
+===== F:\HGW-Sena\HGW-Flask\tests\Personal\InfoPersonal\Info\test_update_personal.py ===== 
+import pytest
+import json
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_update_personal_json_exitoso(monkeypatch, client, fake_conn):
+    data = {
+        "nombre": "Fabian Nuevo",
+        "apellido": "Amaya",
+        "direcciones": [
+            {
+                "id_direccion": 1,
+                "direccion": "Nueva Calle",
+                "codigo_postal": "99999"
+            }
+        ]
+    }
+
+    fake_conn.set_fetchone_responses([{"id_usuario": 1}])
+    fake_conn.set_fetchall_responses([])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.put(
+        "/api/personal/update?id=1",
+        data=json.dumps(data),
+        content_type="application/json"
+    )
+
+    assert resp.status_code == 200
+    assert resp.get_json()["success"] is True
+    assert fake_conn.commit_count == 1
+
+
+def test_update_personal_sin_id(client):
+    resp = client.put("/api/personal/update")
+    assert resp.status_code == 400
+
+
+def test_update_personal_usuario_no_existe(monkeypatch, client, fake_conn):
+    fake_conn.set_fetchone_responses([None])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    # simulamos foto (multipart)
+    resp = client.put(
+        "/api/personal/update?id=1",
+        data={"data": "{}"},
+        content_type="multipart/form-data"
+    )
+
+    assert resp.status_code == 404
+
+
+def test_update_personal_error(monkeypatch, client):
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    resp = client.put("/api/personal/update?id=1")
+
+    assert resp.status_code == 500
+ 
+===== F:\HGW-Sena\HGW-Flask\tests\Personal\InfoPersonal\Ubicaciones\test_get_ubicaciones.py ===== 
+import pytest
+
+DIR = "app.controllers.User.Personal.personal"
+
+def test_get_ubicaciones_exitoso(monkeypatch, client, fake_conn):
+    """
+    Caso exitoso: debe retornar países y sus ciudades.
+    """
+
+    # Respuestas simuladas:
+    # Primera consulta → países
+    # Las siguientes consultas → ciudades de cada país
+    fake_conn.set_fetchall_responses([
+        [  # países
+            {"id_ubicacion": 1, "nombre": "Colombia"},
+            {"id_ubicacion": 2, "nombre": "México"}
+        ],
+        [  # ciudades de Colombia
+            {"id_ubicacion": 10, "nombre": "Bogotá"},
+            {"id_ubicacion": 11, "nombre": "Medellín"}
+        ],
+        [  # ciudades de México
+            {"id_ubicacion": 20, "nombre": "CDMX"},
+            {"id_ubicacion": 21, "nombre": "Guadalajara"}
+        ]
+    ])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/ubicaciones")
+    assert resp.status_code == 200
+
+    data = resp.get_json()
+    assert data["success"] is True
+
+    ubic = data["ubicaciones"]
+
+    assert "Colombia" in ubic
+    assert "México" in ubic
+    assert ubic["Colombia"] == ["Bogotá", "Medellín"]
+    assert ubic["México"] == ["CDMX", "Guadalajara"]
+
+
+def test_get_ubicaciones_sin_ciudades(monkeypatch, client, fake_conn):
+    """
+    Caso donde el país existe pero no tiene ciudades asociadas.
+    """
+
+    fake_conn.set_fetchall_responses([
+        [  # países
+            {"id_ubicacion": 1, "nombre": "Colombia"}
+        ],
+        [  # ciudades vacías
+        ]
+    ])
+
+    monkeypatch.setattr(f"{DIR}.get_db", lambda: fake_conn)
+
+    resp = client.get("/api/ubicaciones")
+    assert resp.status_code == 200
+
+    data = resp.get_json()
+    assert data["ubicaciones"]["Colombia"] == []
+
+
+def test_get_ubicaciones_error(monkeypatch, client):
+    """
+    Error en base de datos.
+    """
+
+    monkeypatch.setattr(
+        f"{DIR}.get_db",
+        lambda: (_ for _ in ()).throw(Exception("DB caída"))
+    )
+
+    resp = client.get("/api/ubicaciones")
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
+ 
+===== F:\HGW-Sena\HGW-Flask\tests\Personal\Membresia\test_obtener_membresia.py ===== 
+import pytest
+from decimal import Decimal
+
+# ================================
+# GET /api/membresia?id=#
+# ================================
+
+def test_obtener_membresia_sin_id(client):
+    resp = client.get("/api/membresia")  
+    assert resp.status_code == 400
+    assert resp.get_json()["success"] is False
+
+
+def test_obtener_membresia_no_existe(monkeypatch, client, fake_conn):
+
+    fake_conn.set_fetchone_responses([None])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Personal.membresia.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/membresia?id=5")
+    assert resp.status_code == 404
+    assert resp.get_json()["success"] is False
+
+
+def test_obtener_membresia_exitoso(monkeypatch, client, fake_conn):
+
+    fake_conn.set_fetchone_responses([
+        {
+            "id_membresia": 1,
+            "nombre_membresia": "Bronce",
+            "precio_membresia": Decimal("20.5"),
+            "bv_requeridos": Decimal("100.0"),
+            "bv_acumulados": Decimal("50.0"),
+            "proxima_membresia": "Plata"
+        }
+    ])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Personal.membresia.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/membresia?id=1")
+    body = resp.get_json()
+
+    assert resp.status_code == 200
+    assert body["success"] is True
+    assert body["membresia"]["nombre_membresia"] == "Bronce"
+    assert isinstance(body["membresia"]["precio_membresia"], float)
+
+
+def test_obtener_membresia_error(monkeypatch, client):
+
+    def fake_error():
+        raise Exception("DB caída")
+
+    monkeypatch.setattr(
+        "app.controllers.User.Personal.membresia.get_db",
+        fake_error
+    )
+
+    resp = client.get("/api/membresia?id=1")
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
+ 
+===== F:\HGW-Sena\HGW-Flask\tests\Personal\Membresia\test_obtener_todas_membresias.py ===== 
+import pytest
+from decimal import Decimal
+
+# ================================
+# GET /api/membresias
+# ================================
+
+def test_obtener_todas_membresias_exitoso(monkeypatch, client, fake_conn):
+
+    fake_conn.set_fetchall_responses([
+        [
+            {
+                "id_membresia": 1,
+                "nombre_membresia": "Bronce",
+                "precio_membresia": Decimal("19.99"),
+                "bv": Decimal("50")
+            },
+            {
+                "id_membresia": 2,
+                "nombre_membresia": "Plata",
+                "precio_membresia": Decimal("39.99"),
+                "bv": Decimal("120")
+            }
+        ]
+    ])
+
+    monkeypatch.setattr(
+        "app.controllers.User.Personal.membresia.get_db",
+        lambda: fake_conn
+    )
+
+    resp = client.get("/api/membresias")
+    body = resp.get_json()
+
+    assert resp.status_code == 200
+    assert body["success"] is True
+    assert isinstance(body["membresias"], list)
+    assert isinstance(body["membresias"][0]["precio_membresia"], float)
+
+
+def test_obtener_todas_membresias_error(monkeypatch, client):
+
+    def fake_error():
+        raise Exception("DB caída")
+
+    monkeypatch.setattr(
+        "app.controllers.User.Personal.membresia.get_db",
+        fake_error
+    )
+
+    resp = client.get("/api/membresias")
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
+ 
+===== F:\HGW-Sena\HGW-Flask\tests\Personal\Red\test_mi_red.py ===== 
+import pytest
+
+DIR = "app.controllers.User.Personal.red_multinivel"
+
+# -------------------------------------------------------
+# 1. FALTA ID DE USUARIO
+# -------------------------------------------------------
+def test_obtener_mi_red_sin_id(client):
+    resp = client.get("/api/mi-red")
+    assert resp.status_code == 400
+    assert resp.get_json()["success"] is False
+
+
+# -------------------------------------------------------
+# 2. ERROR EN CONEXIÓN MYSQL (connection = None)
+# -------------------------------------------------------
+def test_obtener_mi_red_sin_conexion(monkeypatch, client):
+    monkeypatch.setattr(f"{DIR}.get_connection", lambda: None)
+
+    resp = client.get("/api/mi-red?id=1")
+    assert resp.status_code == 500
+
+    data = resp.get_json()
+    assert data["success"] is False
+    assert "conexión" in data["message"].lower()
+
+
+# -------------------------------------------------------
+# 3. USUARIO NO EXISTE
+# -------------------------------------------------------
+def test_obtener_mi_red_usuario_no_existe(monkeypatch, client, fake_conn):
+
+    # No retorna usuario
+    fake_conn.set_fetchone_responses([None])
+    fake_conn.set_fetchall_responses([])
+
+    monkeypatch.setattr(f"{DIR}.get_connection", lambda: fake_conn)
+
+    resp = client.get("/api/mi-red?id=99")
+
+    assert resp.status_code == 404
+    assert resp.get_json()["message"] == "Usuario no encontrado"
+
+
+# -------------------------------------------------------
+# 4. RED EXITOSA (devuelve descendientes)
+# -------------------------------------------------------
+def test_obtener_mi_red_exitoso(monkeypatch, client, fake_conn):
+
+    # 1) fetchone() → usuario encontrado
+    # 2) fetchall() → lista de la red
+    fake_conn.set_fetchone_responses([
+        {"nombre_usuario": "fabian"},  # usuario principal
+    ])
+
+    fake_conn.set_fetchall_responses([
+        [   # red multinivel
+            {
+                "id_usuario": 2,
+                "nombre": "Juan",
+                "apellido": "Pérez",
+                "nombre_usuario": "juan",
+                "correo_electronico": "j@j.com",
+                "url_foto_perfil": None,
+                "patrocinador": "fabian",
+                "nombre_membresia": "Bronce",
+                "fecha_registro": "2024-01-01 10:00:00",
+                "nivel": 1,
+                "activo": 1,
+                "numero_telefono": "123",
+                "total_red": 3,
+                "puntos_bv": 10
+            }
+        ]
+    ])
+
+    monkeypatch.setattr(f"{DIR}.get_connection", lambda: fake_conn)
+
+    resp = client.get("/api/mi-red?id=1")
+
+    assert resp.status_code == 200
+    body = resp.get_json()
+
+    assert body["success"] is True
+    assert body["total"] == 1
+    assert body["codigo_patrocinador"] == "fabian"
+    assert body["red"][0]["nombre_usuario"] == "juan"
+
+
+# -------------------------------------------------------
+# 5. ERROR INTERNO EN CONSULTA
+# -------------------------------------------------------
+def test_obtener_mi_red_error(monkeypatch, client):
+
+    class FakeConn:
+        def cursor(self):
+            raise Exception("DB caída")
+
+    monkeypatch.setattr(f"{DIR}.get_connection", lambda: FakeConn())
+
+    resp = client.get("/api/mi-red?id=1")
+
+    assert resp.status_code == 500
+    assert resp.get_json()["success"] is False
+ 
diff --git a/HGW-Flask/tests/Tablas/a b/HGW-Flask/tests/Tablas/a
new file mode 100644
index 0000000..eba8af6
--- /dev/null
+++ b/HGW-Flask/tests/Tablas/a
@@ -0,0 +1,8 @@
+test_registros.py
+test_consultas.py
+test_consultaTabla.py
+test_orden_detalle.py
+test_eliminar.py
+test_consultaFilas.py
+test_editar.py
+test_consultasInformes.py
diff --git a/HGW-Flask/tests/Tablas/test_consultaTabla.py b/HGW-Flask/tests/Tablas/test_consultaTabla.py
new file mode 100644
index 0000000..4466abd
--- /dev/null
+++ b/HGW-Flask/tests/Tablas/test_consultaTabla.py
@@ -0,0 +1,139 @@
+import pytest
+import types
+
+# ------------------------------------------------------
+# CASO 1: Tabla no existe
+# ------------------------------------------------------
+def test_consultaTabla_tabla_no_existe(client, monkeypatch):
+    monkeypatch.setattr("app.models.tablas.classes", {})
+
+    resp = client.post("/consultaTabla", json={"table": "fantasma"})
+    data = resp.get_json()
+
+    assert resp.status_code == 400
+    assert "Tabla 'fantasma' no encontrada" in data["error"]
+
+
+# ------------------------------------------------------
+# CASO 2: Tabla = ordenes  (usa query especial)
+# ------------------------------------------------------
+def test_consultaTabla_ordenes_query_especial(client, monkeypatch):
+    # fake tabla (no se usa realmente, solo la clave importa)
+    monkeypatch.setattr(
+        "app.models.tablas.classes",
+        {"ordenes": object}
+    )
+
+    # fake resultado de query
+    fake_rows = [
+        {
+            "id_orden": 1,
+            "usuario": "Juan Pérez",
+            "correo_electronico": "juan@test.com",
+            "total": 150000,
+            "fecha_creacion": "2024-01-01 10:00",
+            "medio_pago": "Nequi"
+        }
+    ]
+
+    class FakeResult:
+        def keys(self):
+            return fake_rows[0].keys()
+
+        def __iter__(self):
+            for row in fake_rows:
+                yield types.SimpleNamespace(_mapping=row)
+
+    def fake_execute(query):
+        return FakeResult()
+
+    # mock DB
+    class FakeSession:
+        def execute(self, query):
+            return fake_execute(query)
+
+        def remove(self):
+            pass
+
+    monkeypatch.setattr("app.models.tablas.db.session", FakeSession())
+
+    resp = client.post("/consultaTabla", json={"table": "ordenes"})
+    data = resp.get_json()
+
+    assert resp.status_code == 200
+    assert "filas" in data
+    assert "columnas" in data
+    assert data["filas"][0]["usuario"] == "Juan Pérez"
+
+
+# ------------------------------------------------------
+# CASO 3: Tabla normal (serializar_con_fk_lookup)
+# ------------------------------------------------------
+def test_consultaTabla_tabla_normal(client, monkeypatch):
+    # ---------- Fake tabla con columnas simuladas ----------
+    class FakeColumn:
+        def __init__(self, name):
+            self.name = name
+
+    class FakeColumns:
+        def __init__(self):
+            self._cols = {
+                "id": FakeColumn("id"),
+                "nombre": FakeColumn("nombre")
+            }
+
+        def __iter__(self):
+            return iter(self._cols.values())
+
+    class FakeTableObj:
+        def __init__(self):
+            # Se asegura de que __table__ sea una instancia, no una clase
+            self.__table__ = types.SimpleNamespace(columns = FakeColumns())
+
+    fake_tabla = FakeTableObj()
+
+    monkeypatch.setattr(
+        "app.models.tablas.classes",
+        {"categorias": fake_tabla}
+    )
+
+    # ---------- Mock serializar ----------
+    def fake_serializar(lista):
+        return [{"id": 10, "nombre": "Categoría Test"}]
+
+    monkeypatch.setattr(
+        "app.models.tablas.serializar_con_fk_lookup",
+        fake_serializar
+    )
+
+    # ---------- Fake query ----------
+    class FakeObj:
+        id = 10
+        nombre = "Categoría Test"
+
+    class FakeQuery:
+        def all(self):
+            return [FakeObj()]
+
+    class FakeSession:
+        def query(self, tabla):
+            return FakeQuery()
+        def remove(self):
+            pass
+
+    monkeypatch.setattr("app.models.tablas.db.session", FakeSession())
+
+    resp = client.post("/consultaTabla", json={"table": "categorias"})
+    data = resp.get_json()
+
+    assert resp.status_code == 200
+    assert "filas" in data
+    assert "columnas" in data
+
+    # Verifica que los valores serializados estén presentes
+    assert data["filas"][0]["id"] == 10
+    assert data["filas"][0]["nombre"] == "Categoría Test"
+
+    # Verifica que entre las columnas haya “nombre”
+    assert any(col["field"] == "nombre" for col in data["columnas"])
+    assert any(col["field"] == "id" for col in data["columnas"])
diff --git a/HGW-Flask/tests/Tablas/test_consultas.py b/HGW-Flask/tests/Tablas/test_consultas.py
new file mode 100644
index 0000000..3a4cb27
--- /dev/null
+++ b/HGW-Flask/tests/Tablas/test_consultas.py
@@ -0,0 +1,142 @@
+import pytest
+
+def test_consultas_con_foreign(client, monkeypatch):
+    # -----------------------------
+    # Fake tabla y fake objetos
+    # -----------------------------
+    class FakeObj:
+        id = 1
+        nombre = "Producto X"
+        categoria = 2
+
+        __table__ = type("T", (), {"columns": []})
+
+    class FakeTabla:
+        __table__ = type("T", (), {"columns": []})
+
+    # fake resultados simulados por SQLAlchemy
+    fake_result = [FakeObj()]
+
+    # -----------------------------
+    # Mock tablas.classes
+    # -----------------------------
+    monkeypatch.setattr(
+        "app.models.tablas.classes",
+        {"productos": FakeTabla}
+    )
+
+    # -----------------------------
+    # Mock serializar_con_fk_lookup
+    # -----------------------------
+    def fake_serializar(objetos):
+        return [{"id": 1, "nombre": "Producto X"}]
+
+    monkeypatch.setattr(
+        "app.models.tablas.serializar_con_fk_lookup",
+        fake_serializar
+    )
+
+    # -----------------------------
+    # Mock db.session.query(...).filter(...).all()
+    # -----------------------------
+    class FakeQuery:
+        def filter(self, *args, **kwargs):
+            return self
+
+        def all(self):
+            return fake_result
+
+    class FakeSession:
+        def query(self, tabla):
+            return FakeQuery()
+        
+        def remove(self):
+            pass
+
+    monkeypatch.setattr(
+        "app.models.tablas.db.session",
+        FakeSession()
+    )
+
+    # -----------------------------
+    # Ejecutar petición
+    # -----------------------------
+    body = {
+        "table": "productos",
+        "columnDependency": "categoria",
+        "foreign": 2
+    }
+
+    response = client.post("/consultas", json=body)
+    data = response.get_json()
+
+    assert response.status_code == 200
+    assert "productos" in data
+    assert data["productos"][0]["id"] == 1
+    assert data["productos"][0]["nombre"] == "Producto X"
+
+
+def test_consultas_sin_foreign(client, monkeypatch):
+    class FakeObj:
+        id = 10
+        nombre = "Categoría Y"
+        __table__ = type("T", (), {"columns": []})
+
+    class FakeTabla:
+        __table__ = type("T", (), {"columns": []})
+
+    monkeypatch.setattr(
+        "app.models.tablas.classes",
+        {"categorias": FakeTabla}
+    )
+
+    def fake_serializar(objetos):
+        return [{"id": 10, "nombre": "Categoría Y"}]
+
+    monkeypatch.setattr(
+        "app.models.tablas.serializar_con_fk_lookup",
+        fake_serializar
+    )
+
+    class FakeQuery:
+        def all(self):
+            return [FakeObj()]
+
+    class FakeSession:
+        def query(self, tabla):
+            return FakeQuery()
+        
+        def remove(self):
+            pass
+
+    monkeypatch.setattr(
+        "app.models.tablas.db.session",
+        FakeSession()
+    )
+
+    body = [
+        {"table": "categorias"}
+    ]
+
+    response = client.post("/consultas", json=body)
+    data = response.get_json()
+
+    assert response.status_code == 200
+    assert "categorias" in data
+    assert data["categorias"][0]["id"] == 10
+    assert data["categorias"][0]["nombre"] == "Categoría Y"
+
+
+def test_consultas_tabla_no_existe(client, monkeypatch):
+    monkeypatch.setattr("app.models.tablas.classes", {})
+
+    body = {
+        "table": "noexiste",
+        "columnDependency": "x",
+        "foreign": 1
+    }
+
+    response = client.post("/consultas", json=body)
+
+    assert response.status_code == 400
+    assert "Tabla 'noexiste' no encontrada" in response.get_json()["error"]
diff --git a/HGW-Flask/tests/Tablas/test_registros.py b/HGW-Flask/tests/Tablas/test_registros.py
new file mode 100644
index 0000000..d6f98ac
--- /dev/null
+++ b/HGW-Flask/tests/Tablas/test_registros.py
@@ -0,0 +1,80 @@
+import io
+import json
+import types
+
+def test_registros_exitoso(client, monkeypatch):
+    class FakeTabla:
+        def __init__(self):
+            self.nombre = None
+            self.edad = None
+            self.avatar = None
+
+    fake_classes = {"usuarios": FakeTabla}
+
+    monkeypatch.setattr(
+        "app.models.tablas.classes",
+        fake_classes
+    )
+
+    def fake_upload(file, folder):
+        return ("https://fake-bucket/avatar.png", "avatar.png")
+
+    monkeypatch.setattr(
+        "app.models.tablas.upload_image_to_supabase",
+        fake_upload
+    )
+
+    class FakeSession:
+        def __init__(self):
+            self.add_called = False
+            self.commit_called = False
+
+        def add(self, x):
+            self.add_called = True
+
+        def commit(self):
+            self.commit_called = True
+
+        def remove(self):
+            pass
+
+    fake_session = FakeSession()
+
+    monkeypatch.setattr(
+        "app.models.tablas.db.session",
+        fake_session
+    )
+
+    data = {
+        "table": "usuarios",
+        "nombre": "John",
+        "edad": "25",
+        "req": "123"
+    }
+
+    img = (io.BytesIO(b"fake image bytes"), "foto.png")
+
+    response = client.post(
+        "/registro",
+        data={**data, "avatar": img},
+        content_type="multipart/form-data"
+    )
+
+    assert response.status_code == 200
+    json_data = response.get_json()
+    assert json_data["respuesta"] == "Se registró correctamente"
+    assert fake_session.add_called
+    assert fake_session.commit_called
+
+def test_registros_tabla_no_existe(client, monkeypatch):
+    monkeypatch.setattr(
+        "app.models.tablas.classes",
+        {}
+    )
+    resp = client.post(
+        "/registro",
+        data={"table": "no_existe"},
+        content_type="multipart/form-data"
+    )
+    assert resp.status_code == 400
+    assert "Tabla 'no_existe' no encontrada" in resp.get_json()["error"]
diff --git a/HGW-Flask/tests/conftest.py b/HGW-Flask/tests/conftest.py
new file mode 100644
index 0000000..3b03988
--- /dev/null
+++ b/HGW-Flask/tests/conftest.py
@@ -0,0 +1,115 @@
+import os
+import sys
+import pytest
+import warnings
+
+# ---------------------------------
+# FILTRAR WARNINGS PARA LOS TESTS
+# ---------------------------------
+warnings.filterwarnings("ignore", category=DeprecationWarning)
+warnings.filterwarnings("ignore", category=FutureWarning)
+warnings.filterwarnings("ignore", category=UserWarning)
+warnings.filterwarnings("ignore", category=RuntimeWarning)
+
+# Asegurar que el root de la app esté en sys.path
+ROOT_DIR = os.path.abspath(os.path.join(os.path.dirname(__file__), ".."))
+if ROOT_DIR not in sys.path:
+    sys.path.insert(0, ROOT_DIR)
+
+from app import create_app
+
+# ------------------------------
+# Dummy Cursor
+# ------------------------------
+class DummyCursor:
+    def __init__(self, parent_conn):
+        self.parent = parent_conn
+        self._fetchone_index = 0
+        self._fetchall_index = 0
+
+    @property
+    def lastrowid(self):
+        return self.parent.lastrowid
+
+    def execute(self, sql, params=None):
+        self.parent.executed_queries.append((sql, params))
+
+    def fetchone(self):
+        if self._fetchone_index < len(self.parent.fetchone_responses):
+            value = self.parent.fetchone_responses[self._fetchone_index]
+            self._fetchone_index += 1
+            return value
+        return None
+
+    def fetchall(self):
+        if self._fetchall_index < len(self.parent.fetchall_responses):
+            value = self.parent.fetchall_responses[self._fetchall_index]
+            self._fetchall_index += 1
+            return value
+        return []
+
+    def set_fetchone_responses(self, responses):
+        self.parent.set_fetchone_responses(responses)
+
+    def set_fetchall_responses(self, responses):
+        self.parent.set_fetchall_responses(responses)
+
+    def __enter__(self):
+        return self
+
+    def __exit__(self, exc_type, exc, tb):
+        return False
+
+# ------------------------------
+# Dummy Connection
+# ------------------------------
+class DummyConnection:
+    def __init__(self):
+        self.fetchone_responses = []
+        self.fetchall_responses = []
+        self.executed_queries = []
+        self.commit_count = 0
+
+    def cursor(self, *args, **kwargs):
+        return DummyCursor(self)
+
+    def commit(self):
+        self.commit_count += 1
+
+    def ping(self, reconnect=False):
+        pass
+
+    def set_fetchone_responses(self, responses):
+        self.fetchone_responses = list(responses)
+
+    def set_fetchall_responses(self, responses):
+        self.fetchall_responses = list(responses)
+
+    def reset(self):
+        self.fetchone_responses = []
+        self.fetchall_responses = []
+        self.executed_queries = []
+        self.commit_count = 0
+
+# ------------------------------
+# FIXTURES DE FLASK
+# ------------------------------
+@pytest.fixture
+def app():
+    os.environ["FLASK_ENV"] = "testing"
+    os.environ["TESTING"] = "1"
+
+    app = create_app()
+
+    app.config["TESTING"] = True
+    app.config["SECRET_KEY"] = "test_secret_key"
+
+    return app
+
+@pytest.fixture
+def client(app):
+    return app.test_client()
+
+@pytest.fixture
+def fake_conn():
+    return DummyConnection()
diff --git a/README.md b/README.md
index a48e2ea..55607c3 100644
--- a/README.md
+++ b/README.md
@@ -15,7 +15,7 @@ Este repositorio incluye:
 | Plataforma             | Descripción                                      | Enlace                                   |
 | ---------------------- | ------------------------------------------------ | ---------------------------------------- |
 | 🌍 **Web (React)**     | Interfaz principal accesible desde navegador.    | [🔗 Enlace al despliegue web](https://hgw.up.railway.app/)         |
-| 🧠 **Backend (Flask)** | API REST que gestiona la lógica y base de datos. | [🔗 Enlace al backend](hgwflask.up.railway.app/scalar)                |
+| 🧠 **Backend (Flask)** | API REST que gestiona la lógica y base de datos. | [🔗 Enlace al backend](https://hgwflask.up.railway.app/scalar)                |
 | 📱 **Móvil (Flutter)** | Versión móvil multiplataforma.                   | [🔗 Enlace al despliegue móvil / APK](#) |
 
 ---
